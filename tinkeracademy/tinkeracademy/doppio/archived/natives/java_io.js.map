{"version":3,"sources":["../../../../../../../../var/folders/xp/frk6wp291hjdv4d4bryr39c40000gp/T/doppio-temp39793/tmp_release/src/natives/java_io.js"],"names":["throwNodeError","thread","err","type","code","throwNewException","message","async_input","n_bytes","resume","read","nBytes","bytes","process","stdin","length","readUInt8","Buffer","once","data","setImmediate","statFile","fname","cb","fs","stat","require","path","Doppio","util","VM","Util","ThreadStatus","Enums","Long","java_io_Console","echoOn","echoOff","setRawMode","stdout","isTTY","java_io_FileDescriptor","javaThis","java_io_FileInputStream","filename","filepath","toString","setStatus","ASYNC_WAITING","open","e","fd","fdObj","$pos","asyncReturn","buf","bytes_read","byte","byteArr","offset","pos","array","bytesRead","i","readInt8","b","idx","fstat","stats","bytesLeft","size","toSkip","Math","min","toNumber","fromNumber","close","java_io_FileOutputStream","name","append","len","write","numBytes","output","stderr","java_io_ObjectInputStream","arg0","arg1","arg2","arg3","arg4","java_io_ObjectOutputStream","java_io_ObjectStreamClass","jco","$cls","getMethod","java_io_RandomAccessFile","mode","modeStr","rafStatics","getClass","getConstructor","byte_arr","value","writeInt8","java_io_UnixFileSystem","jvmPathStr","jsStr","initString","getBsCl","resolve","normalize","file","fileSystem","getInitializedClass","rv","isFile","isDirectory","access","mask","ZERO","mtime","getTime","enable","owneronly","existing_access","chmod","readdir","files","rmdir","unlink","newArrayFromData","map","mkdir","file1","file2","file1path","file2path","rename","time","atime","Date","utimes","registerNatives","java/io/Console","java/io/FileDescriptor","java/io/FileInputStream","java/io/FileOutputStream","java/io/ObjectInputStream","java/io/ObjectOutputStream","java/io/ObjectStreamClass","java/io/RandomAccessFile","java/io/UnixFileSystem"],"mappings":"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","file":"java_io.js","sourcesContent":["var fs = require('fs');\nvar path = require('path');\nvar Doppio = require('../doppiojvm');\nvar util = Doppio.VM.Util;\nvar ThreadStatus = Doppio.VM.Enums.ThreadStatus;\nvar Long = Doppio.VM.Long;\nfunction throwNodeError(thread, err) {\n    var type = 'Ljava/io/IOException;';\n    if (err.code === 'ENOENT') {\n        type = 'Ljava/io/FileNotFoundException;';\n    }\n    thread.throwNewException(type, err.message);\n}\nfunction async_input(n_bytes, resume) {\n    var read = function (nBytes) {\n            var bytes = process.stdin.read(nBytes);\n            if (bytes === null) {\n                bytes = process.stdin.read();\n            }\n            if (bytes !== null && bytes.length === 1 && bytes.readUInt8(0) === 0) {\n                bytes = new Buffer(0);\n            }\n            return bytes;\n        }, bytes = read(n_bytes);\n    if (bytes === null) {\n        process.stdin.once('readable', function (data) {\n            var bytes = read(n_bytes);\n            if (bytes === null) {\n                bytes = new Buffer(0);\n            }\n            resume(bytes);\n        });\n    } else {\n        setImmediate(function () {\n            resume(bytes);\n        });\n    }\n}\nfunction statFile(fname, cb) {\n    fs.stat(fname, function (err, stat) {\n        if (err != null) {\n            cb(null);\n        } else {\n            cb(stat);\n        }\n    });\n}\nvar java_io_Console = function () {\n    function java_io_Console() {\n    }\n    java_io_Console['encoding()Ljava/lang/String;'] = function (thread) {\n        return null;\n    };\n    java_io_Console['echo(Z)Z'] = function (thread, echoOn) {\n        var echoOff = !echoOn;\n        process.stdin.setRawMode(echoOff);\n        return echoOff;\n    };\n    java_io_Console['istty()Z'] = function (thread) {\n        return process.stdout.isTTY;\n    };\n    return java_io_Console;\n}();\nvar java_io_FileDescriptor = function () {\n    function java_io_FileDescriptor() {\n    }\n    java_io_FileDescriptor['sync()V'] = function (thread, javaThis) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    java_io_FileDescriptor['initIDs()V'] = function (thread) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    return java_io_FileDescriptor;\n}();\nvar java_io_FileInputStream = function () {\n    function java_io_FileInputStream() {\n    }\n    java_io_FileInputStream['open0(Ljava/lang/String;)V'] = function (thread, javaThis, filename) {\n        var filepath = filename.toString();\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.open(filepath, 'r', function (e, fd) {\n            if (e != null) {\n                if (e.code === 'ENOENT') {\n                    thread.throwNewException('Ljava/io/FileNotFoundException;', '' + filepath + ' (No such file or directory)');\n                } else {\n                    thread.throwNewException('Ljava/lang/InternalError', 'Internal JVM error: ' + e);\n                }\n            } else {\n                var fdObj = javaThis['java/io/FileInputStream/fd'];\n                fdObj['java/io/FileDescriptor/fd'] = fd;\n                fdObj.$pos = 0;\n                thread.asyncReturn();\n            }\n        });\n    };\n    java_io_FileInputStream['read0()I'] = function (thread, javaThis) {\n        var fdObj = javaThis['java/io/FileInputStream/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        if (-1 === fd) {\n            thread.throwNewException('Ljava/io/IOException;', 'Bad file descriptor');\n        } else if (0 !== fd) {\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            var buf = new Buffer(1);\n            fs.read(fd, buf, 0, 1, fdObj.$pos, function (err, bytes_read) {\n                if (err) {\n                    return throwNodeError(thread, err);\n                }\n                fdObj.$pos++;\n                thread.asyncReturn(0 === bytes_read ? -1 : buf.readUInt8(0));\n            });\n        } else {\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            async_input(1, function (byte) {\n                thread.asyncReturn(0 === byte.length ? -1 : byte.readUInt8(0));\n            });\n        }\n    };\n    java_io_FileInputStream['readBytes([BII)I'] = function (thread, javaThis, byteArr, offset, nBytes) {\n        var buf, pos, fdObj = javaThis['java/io/FileInputStream/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        if (offset + nBytes > byteArr.array.length) {\n            thread.throwNewException('Ljava/lang/IndexOutOfBoundsException;', '');\n            return;\n        }\n        if (nBytes === 0) {\n            return 0;\n        } else if (-1 === fd) {\n            thread.throwNewException('Ljava/io/IOException;', 'Bad file descriptor');\n        } else if (0 !== fd) {\n            pos = fdObj.$pos;\n            buf = new Buffer(nBytes);\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            fs.read(fd, buf, 0, nBytes, pos, function (err, bytesRead) {\n                if (null != err) {\n                    throwNodeError(thread, err);\n                } else {\n                    fdObj.$pos += bytesRead;\n                    for (var i = 0; i < bytesRead; i++) {\n                        byteArr.array[offset + i] = buf.readInt8(i);\n                    }\n                    thread.asyncReturn(0 === bytesRead ? -1 : bytesRead);\n                }\n            });\n        } else {\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            async_input(nBytes, function (bytes) {\n                var b, idx;\n                for (idx = 0; idx < bytes.length; idx++) {\n                    b = bytes.readUInt8(idx);\n                    byteArr.array[offset + idx] = b;\n                }\n                thread.asyncReturn(bytes.length === 0 ? -1 : bytes.length);\n            });\n        }\n    };\n    java_io_FileInputStream['skip(J)J'] = function (thread, javaThis, nBytes) {\n        var fdObj = javaThis['java/io/FileInputStream/fd'];\n        var fd = fdObj['java/io/FileDescriptor/fd'];\n        if (-1 === fd) {\n            thread.throwNewException('Ljava/io/IOException;', 'Bad file descriptor');\n        } else if (0 !== fd) {\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            fs.fstat(fd, function (err, stats) {\n                if (err) {\n                    return throwNodeError(thread, err);\n                }\n                var bytesLeft = stats.size - fdObj.$pos, toSkip = Math.min(nBytes.toNumber(), bytesLeft);\n                fdObj.$pos += toSkip;\n                thread.asyncReturn(Long.fromNumber(toSkip), null);\n            });\n        } else {\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            async_input(nBytes.toNumber(), function (bytes) {\n                thread.asyncReturn(Long.fromNumber(bytes.length), null);\n            });\n        }\n    };\n    java_io_FileInputStream['available()I'] = function (thread, javaThis) {\n        var fdObj = javaThis['java/io/FileInputStream/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        if (fd === -1) {\n            thread.throwNewException('Ljava/io/IOException;', 'Bad file descriptor');\n        } else if (fd === 0) {\n            return 0;\n        } else {\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            fs.fstat(fd, function (err, stats) {\n                if (err) {\n                    return throwNodeError(thread, err);\n                }\n                thread.asyncReturn(stats.size - fdObj.$pos);\n            });\n        }\n    };\n    java_io_FileInputStream['initIDs()V'] = function (thread) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    java_io_FileInputStream['close0()V'] = function (thread, javaThis) {\n        var fdObj = javaThis['java/io/FileInputStream/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.close(fd, function (err) {\n            if (err) {\n                throwNodeError(thread, err);\n            } else {\n                fdObj['java/io/FileDescriptor/fd'] = -1;\n                thread.asyncReturn();\n            }\n        });\n    };\n    return java_io_FileInputStream;\n}();\nvar java_io_FileOutputStream = function () {\n    function java_io_FileOutputStream() {\n    }\n    java_io_FileOutputStream['open0(Ljava/lang/String;Z)V'] = function (thread, javaThis, name, append) {\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.open(name.toString(), append ? 'a' : 'w', function (err, fd) {\n            if (err) {\n                return throwNodeError(thread, err);\n            }\n            var fdObj = javaThis['java/io/FileOutputStream/fd'];\n            fdObj['java/io/FileDescriptor/fd'] = fd;\n            fs.fstat(fd, function (err, stats) {\n                fdObj.$pos = stats.size;\n                thread.asyncReturn();\n            });\n        });\n    };\n    java_io_FileOutputStream['write(IZ)V'] = function (thread, javaThis, b, append) {\n        java_io_FileOutputStream['writeBytes([BIIZ)V'](thread, javaThis, { array: [b] }, 0, 1, append);\n    };\n    java_io_FileOutputStream['writeBytes([BIIZ)V'] = function (thread, javaThis, bytes, offset, len, append) {\n        var buf = new Buffer(bytes.array), fdObj = javaThis['java/io/FileOutputStream/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        if (fd === -1) {\n            thread.throwNewException('Ljava/io/IOException;', 'Bad file descriptor');\n        } else if (fd !== 1 && fd !== 2) {\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            fs.write(fd, buf, offset, len, fdObj.$pos, function (err, numBytes) {\n                if (err) {\n                    return throwNodeError(thread, err);\n                }\n                fdObj.$pos += numBytes;\n                thread.asyncReturn();\n            });\n        } else {\n            var output = buf.toString('utf8', offset, offset + len);\n            if (fd === 1) {\n                process.stdout.write(output);\n            } else if (fd === 2) {\n                process.stderr.write(output);\n            }\n            thread.setStatus(ThreadStatus.ASYNC_WAITING);\n            setImmediate(function () {\n                thread.asyncReturn();\n            });\n        }\n    };\n    java_io_FileOutputStream['close0()V'] = function (thread, javaThis) {\n        var fdObj = javaThis['java/io/FileOutputStream/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.close(fd, function (err) {\n            if (err) {\n                return throwNodeError(thread, err);\n            } else {\n                fdObj['java/io/FileDescriptor/fd'] = -1;\n                thread.asyncReturn();\n            }\n        });\n    };\n    java_io_FileOutputStream['initIDs()V'] = function (thread) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    return java_io_FileOutputStream;\n}();\nvar java_io_ObjectInputStream = function () {\n    function java_io_ObjectInputStream() {\n    }\n    java_io_ObjectInputStream['bytesToFloats([BI[FII)V'] = function (thread, arg0, arg1, arg2, arg3, arg4) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    java_io_ObjectInputStream['bytesToDoubles([BI[DII)V'] = function (thread, arg0, arg1, arg2, arg3, arg4) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    return java_io_ObjectInputStream;\n}();\nvar java_io_ObjectOutputStream = function () {\n    function java_io_ObjectOutputStream() {\n    }\n    java_io_ObjectOutputStream['floatsToBytes([FI[BII)V'] = function (thread, arg0, arg1, arg2, arg3, arg4) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    java_io_ObjectOutputStream['doublesToBytes([DI[BII)V'] = function (thread, arg0, arg1, arg2, arg3, arg4) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    return java_io_ObjectOutputStream;\n}();\nvar java_io_ObjectStreamClass = function () {\n    function java_io_ObjectStreamClass() {\n    }\n    java_io_ObjectStreamClass['initNative()V'] = function (thread) {\n    };\n    java_io_ObjectStreamClass['hasStaticInitializer(Ljava/lang/Class;)Z'] = function (thread, jco) {\n        return jco.$cls.getMethod('<clinit>()V') !== null;\n    };\n    return java_io_ObjectStreamClass;\n}();\nvar java_io_RandomAccessFile = function () {\n    function java_io_RandomAccessFile() {\n    }\n    java_io_RandomAccessFile['open0(Ljava/lang/String;I)V'] = function (thread, javaThis, filename, mode) {\n        var filepath = filename.toString(), rafStatics = javaThis.getClass().getConstructor(thread), modeStr;\n        switch (mode) {\n        case rafStatics['java/io/RandomAccessFile/O_RDONLY']:\n            modeStr = 'r';\n            break;\n        case rafStatics['java/io/RandomAccessFile/O_RDWR']:\n            modeStr = 'r+';\n            break;\n        case rafStatics['java/io/RandomAccessFile/O_SYNC']:\n        case rafStatics['java/io/RandomAccessFile/O_DSYNC']:\n            modeStr = 'rs+';\n            break;\n        }\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.open(filepath, modeStr, function (e, fd) {\n            if (e) {\n                return throwNodeError(thread, e);\n            } else {\n                var fdObj = javaThis['java/io/RandomAccessFile/fd'];\n                fdObj['java/io/FileDescriptor/fd'] = fd;\n                fdObj.$pos = 0;\n                thread.asyncReturn();\n            }\n        });\n    };\n    java_io_RandomAccessFile['read0()I'] = function (thread, javaThis) {\n        var fdObj = javaThis['java/io/RandomAccessFile/fd'], fd = fdObj['java/io/FileDescriptor/fd'], buf = new Buffer(1);\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.read(fd, buf, 0, 1, fdObj.$pos, function (err, bytesRead) {\n            if (err) {\n                return throwNodeError(thread, err);\n            } else {\n                fdObj.$pos += bytesRead;\n                thread.asyncReturn(bytesRead === 0 ? -1 : buf.readUInt8(0));\n            }\n        });\n    };\n    java_io_RandomAccessFile['readBytes([BII)I'] = function (thread, javaThis, byte_arr, offset, len) {\n        var fdObj = javaThis['java/io/RandomAccessFile/fd'], fd = fdObj['java/io/FileDescriptor/fd'], buf = new Buffer(len);\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.read(fd, buf, 0, len, fdObj.$pos, function (err, bytesRead) {\n            if (err) {\n                return throwNodeError(thread, err);\n            } else {\n                for (var i = 0; i < bytesRead; i++) {\n                    byte_arr.array[offset + i] = buf.readInt8(i);\n                }\n                fdObj.$pos += bytesRead;\n                thread.asyncReturn(0 === bytesRead && 0 !== len ? -1 : bytesRead);\n            }\n        });\n    };\n    java_io_RandomAccessFile['write0(I)V'] = function (thread, javaThis, value) {\n        var fdObj = javaThis['java/io/RandomAccessFile/fd'];\n        var fd = fdObj['java/io/FileDescriptor/fd'];\n        var data = new Buffer(1);\n        data.writeInt8(value, 0);\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.write(fd, data, 0, 1, fdObj.$pos, function (err, numBytes) {\n            if (err) {\n                return throwNodeError(thread, err);\n            }\n            fdObj.$pos += numBytes;\n            thread.asyncReturn();\n        });\n    };\n    java_io_RandomAccessFile['writeBytes([BII)V'] = function (thread, javaThis, byteArr, offset, len) {\n        var fdObj = javaThis['java/io/RandomAccessFile/fd'], fd = fdObj['java/io/FileDescriptor/fd'], buf = new Buffer(byteArr.array);\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.write(fd, buf, offset, len, fdObj.$pos, function (err, numBytes) {\n            if (err) {\n                return throwNodeError(thread, err);\n            }\n            fdObj.$pos += numBytes;\n            thread.asyncReturn();\n        });\n    };\n    java_io_RandomAccessFile['getFilePointer()J'] = function (thread, javaThis) {\n        return Long.fromNumber(javaThis['java/io/RandomAccessFile/fd'].$pos);\n    };\n    java_io_RandomAccessFile['seek0(J)V'] = function (thread, javaThis, pos) {\n        javaThis['java/io/RandomAccessFile/fd'].$pos = pos.toNumber();\n    };\n    java_io_RandomAccessFile['length()J'] = function (thread, javaThis) {\n        var fdObj = javaThis['java/io/RandomAccessFile/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.fstat(fd, function (err, stats) {\n            if (err) {\n                return throwNodeError(thread, err);\n            }\n            thread.asyncReturn(Long.fromNumber(stats.size), null);\n        });\n    };\n    java_io_RandomAccessFile['setLength(J)V'] = function (thread, javaThis, arg0) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    java_io_RandomAccessFile['initIDs()V'] = function (thread) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    java_io_RandomAccessFile['close0()V'] = function (thread, javaThis) {\n        var fdObj = javaThis['java/io/RandomAccessFile/fd'], fd = fdObj['java/io/FileDescriptor/fd'];\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.close(fd, function (err) {\n            if (err) {\n                return throwNodeError(thread, err);\n            } else {\n                fdObj['java/io/FileDescriptor/fd'] = -1;\n                thread.asyncReturn();\n            }\n        });\n    };\n    return java_io_RandomAccessFile;\n}();\nvar java_io_UnixFileSystem = function () {\n    function java_io_UnixFileSystem() {\n    }\n    java_io_UnixFileSystem['canonicalize0(Ljava/lang/String;)Ljava/lang/String;'] = function (thread, javaThis, jvmPathStr) {\n        var jsStr = jvmPathStr.toString();\n        return util.initString(thread.getBsCl(), path.resolve(path.normalize(jsStr)));\n    };\n    java_io_UnixFileSystem['getBooleanAttributes0(Ljava/io/File;)I'] = function (thread, javaThis, file) {\n        var filepath = file['java/io/File/path'], fileSystem = thread.getBsCl().getInitializedClass(thread, 'Ljava/io/FileSystem;').getConstructor(thread);\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath.toString(), function (stats) {\n            var rv = 0;\n            if (stats !== null) {\n                rv |= fileSystem['java/io/FileSystem/BA_EXISTS'];\n                if (stats.isFile()) {\n                    rv |= fileSystem['java/io/FileSystem/BA_REGULAR'];\n                } else if (stats.isDirectory()) {\n                    rv |= fileSystem['java/io/FileSystem/BA_DIRECTORY'];\n                }\n            }\n            thread.asyncReturn(rv);\n        });\n    };\n    java_io_UnixFileSystem['checkAccess(Ljava/io/File;I)Z'] = function (thread, javaThis, file, access) {\n        var filepath = file['java/io/File/path'];\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath.toString(), function (stats) {\n            if (stats == null) {\n                thread.asyncReturn(0);\n            } else {\n                var mask = access | access << 3 | access << 6;\n                thread.asyncReturn((stats.mode & mask) > 0 ? 1 : 0);\n            }\n        });\n    };\n    java_io_UnixFileSystem['getLastModifiedTime(Ljava/io/File;)J'] = function (thread, javaThis, file) {\n        var filepath = file['java/io/File/path'];\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath.toString(), function (stats) {\n            if (stats == null) {\n                thread.asyncReturn(Long.ZERO, null);\n            } else {\n                thread.asyncReturn(Long.fromNumber(stats.mtime.getTime()), null);\n            }\n        });\n    };\n    java_io_UnixFileSystem['getLength(Ljava/io/File;)J'] = function (thread, javaThis, file) {\n        var filepath = file['java/io/File/path'];\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.stat(filepath.toString(), function (err, stat) {\n            thread.asyncReturn(err != null ? Long.ZERO : Long.fromNumber(stat.size), null);\n        });\n    };\n    java_io_UnixFileSystem['setPermission(Ljava/io/File;IZZ)Z'] = function (thread, javaThis, file, access, enable, owneronly) {\n        var filepath = file['java/io/File/path'].toString();\n        if (owneronly) {\n            access <<= 6;\n        } else {\n            access |= access << 6 | access << 3;\n        }\n        if (!enable) {\n            access = ~access;\n        }\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath, function (stats) {\n            if (stats == null) {\n                thread.asyncReturn(0);\n            } else {\n                var existing_access = stats.mode;\n                access = enable ? existing_access | access : existing_access & access;\n                fs.chmod(filepath, access, function (err) {\n                    thread.asyncReturn(err != null ? 0 : 1);\n                });\n            }\n        });\n    };\n    java_io_UnixFileSystem['createFileExclusively(Ljava/lang/String;)Z'] = function (thread, javaThis, path) {\n        var filepath = path.toString();\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath, function (stat) {\n            if (stat != null) {\n                thread.asyncReturn(0);\n            } else {\n                fs.open(filepath, 'w', function (err, fd) {\n                    if (err != null) {\n                        thread.throwNewException('Ljava/io/IOException;', err.message);\n                    } else {\n                        fs.close(fd, function (err) {\n                            if (err != null) {\n                                thread.throwNewException('Ljava/io/IOException;', err.message);\n                            } else {\n                                thread.asyncReturn(1);\n                            }\n                        });\n                    }\n                });\n            }\n        });\n    };\n    java_io_UnixFileSystem['delete0(Ljava/io/File;)Z'] = function (thread, javaThis, file) {\n        var filepath = file['java/io/File/path'].toString();\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath, function (stats) {\n            if (stats == null) {\n                thread.asyncReturn(0);\n            } else if (stats.isDirectory()) {\n                fs.readdir(filepath, function (err, files) {\n                    if (files.length > 0) {\n                        thread.asyncReturn(0);\n                    } else {\n                        fs.rmdir(filepath, function (err) {\n                            thread.asyncReturn(1);\n                        });\n                    }\n                });\n            } else {\n                fs.unlink(filepath, function (err) {\n                    thread.asyncReturn(1);\n                });\n            }\n        });\n    };\n    java_io_UnixFileSystem['list(Ljava/io/File;)[Ljava/lang/String;'] = function (thread, javaThis, file) {\n        var filepath = file['java/io/File/path'], bsCl = thread.getBsCl();\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.readdir(filepath.toString(), function (err, files) {\n            if (err != null) {\n                thread.asyncReturn(null);\n            } else {\n                thread.asyncReturn(util.newArrayFromData(thread, thread.getBsCl(), '[Ljava/lang/String;', files.map(function (file) {\n                    return util.initString(thread.getBsCl(), file);\n                })));\n            }\n        });\n    };\n    java_io_UnixFileSystem['createDirectory(Ljava/io/File;)Z'] = function (thread, javaThis, file) {\n        var filepath = file['java/io/File/path'].toString();\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath, function (stat) {\n            if (stat != null) {\n                thread.asyncReturn(0);\n            } else {\n                fs.mkdir(filepath, function (err) {\n                    thread.asyncReturn(err != null ? 0 : 1);\n                });\n            }\n        });\n    };\n    java_io_UnixFileSystem['rename0(Ljava/io/File;Ljava/io/File;)Z'] = function (thread, javaThis, file1, file2) {\n        var file1path = file1['java/io/File/path'].toString(), file2path = file2['java/io/File/path'].toString();\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.rename(file1path, file2path, function (err) {\n            thread.asyncReturn(err != null ? 0 : 1);\n        });\n    };\n    java_io_UnixFileSystem['setLastModifiedTime(Ljava/io/File;J)Z'] = function (thread, javaThis, file, time) {\n        var mtime = time.toNumber(), atime = new Date().getTime(), filepath = file['java/io/File/path'].toString();\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        fs.utimes(filepath, atime, mtime, function (err) {\n            thread.asyncReturn(1);\n        });\n    };\n    java_io_UnixFileSystem['setReadOnly(Ljava/io/File;)Z'] = function (thread, javaThis, file) {\n        var filepath = file['java/io/File/path'].toString(), mask = ~146;\n        thread.setStatus(ThreadStatus.ASYNC_WAITING);\n        statFile(filepath, function (stats) {\n            if (stats == null) {\n                thread.asyncReturn(0);\n            } else {\n                fs.chmod(filepath, stats.mode & mask, function (err) {\n                    thread.asyncReturn(err != null ? 0 : 1);\n                });\n            }\n        });\n    };\n    java_io_UnixFileSystem['getSpace(Ljava/io/File;I)J'] = function (thread, javaThis, file, arg1) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n        return null;\n    };\n    java_io_UnixFileSystem['initIDs()V'] = function (thread) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n    };\n    return java_io_UnixFileSystem;\n}();\nregisterNatives({\n    'java/io/Console': java_io_Console,\n    'java/io/FileDescriptor': java_io_FileDescriptor,\n    'java/io/FileInputStream': java_io_FileInputStream,\n    'java/io/FileOutputStream': java_io_FileOutputStream,\n    'java/io/ObjectInputStream': java_io_ObjectInputStream,\n    'java/io/ObjectOutputStream': java_io_ObjectOutputStream,\n    'java/io/ObjectStreamClass': java_io_ObjectStreamClass,\n    'java/io/RandomAccessFile': java_io_RandomAccessFile,\n    'java/io/UnixFileSystem': java_io_UnixFileSystem\n});\n//# sourceMappingURL=java_io.js.map"]}
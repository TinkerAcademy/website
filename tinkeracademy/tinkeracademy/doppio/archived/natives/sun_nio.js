function getStringFromHeap(a,b){for(var c=a.getJVM().getHeap(),d=b.toNumber(),e=0;0!==c.get_signed_byte(d+e);)e++;return c.get_buffer(d,e).toString()}function stringToByteArray(a,b){if(!b)return null;for(var c=new Buffer(b,"utf8"),d=c.length,e=util.newArray(a,a.getBsCl(),"[B",d),f=0;d>f;f++)e.array[f]=c.readUInt8(f);return e}function convertError(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING),"ENOENT"===b.code?a.getBsCl().initializeClass(a,"Ljava/nio/file/NoSuchFileException;",function(c){var d=c.getConstructor(a),e=new d(a);e["<init>(Ljava/lang/String;)V"](a,[util.initString(a.getBsCl(),b.path)],function(b){a.throwException(e)})}):"EEXIST"===b.code?a.getBsCl().initializeClass(a,"Ljava/nio/file/FileAlreadyExistsException;",function(d){var e=d.getConstructor(a),f=new e(a);f["<init>(Ljava/lang/String;)V"](a,[util.initString(a.getBsCl(),b.path)],function(a){c(f)})}):a.getBsCl().initializeClass(a,"Lsun/nio/fs/UnixException;",function(d){a.getBsCl().initializeClass(a,"Lsun/nio/fs/UnixConstants;",function(e){var f=d.getConstructor(a),g=new f(a),h=e.getConstructor(a),i=h["sun/nio/fs/UnixConstants/"+b.code];"number"!=typeof i&&(i=-1),g["sun/nio/fs/UnixException/errno"]=i,g["sun/nio/fs/UnixException/msg"]=util.initString(a.getBsCl(),b.message),c(g)})})}function convertStats(a,b){b["sun/nio/fs/UnixFileAttributes/st_mode"]=a.mode,b["sun/nio/fs/UnixFileAttributes/st_ino"]=Long.fromNumber(a.ino),b["sun/nio/fs/UnixFileAttributes/st_dev"]=Long.fromNumber(a.dev),b["sun/nio/fs/UnixFileAttributes/st_rdev"]=Long.fromNumber(a.rdev),b["sun/nio/fs/UnixFileAttributes/st_nlink"]=a.nlink,b["sun/nio/fs/UnixFileAttributes/st_uid"]=a.uid,b["sun/nio/fs/UnixFileAttributes/st_gid"]=a.gid,b["sun/nio/fs/UnixFileAttributes/st_size"]=Long.fromNumber(a.size);var c=date2components(a.atime),d=date2components(a.mtime),e=date2components(a.ctime);b["sun/nio/fs/UnixFileAttributes/st_atime_sec"]=Long.fromNumber(c[0]),b["sun/nio/fs/UnixFileAttributes/st_atime_nsec"]=Long.fromNumber(c[1]),b["sun/nio/fs/UnixFileAttributes/st_mtime_sec"]=Long.fromNumber(d[0]),b["sun/nio/fs/UnixFileAttributes/st_mtime_nsec"]=Long.fromNumber(d[1]),b["sun/nio/fs/UnixFileAttributes/st_ctime_sec"]=Long.fromNumber(e[0]),b["sun/nio/fs/UnixFileAttributes/st_ctime_nsec"]=Long.fromNumber(e[1]),b["sun/nio/fs/UnixFileAttributes/st_birthtime_sec"]=Long.fromNumber(Math.floor(a.birthtime.getTime()/1e3))}function flagTest(a,b){return(a&b)===b}function flag2nodeflag(a,b){if(null===UnixConstants){var c=a.getBsCl().getInitializedClass(a,"Lsun/nio/fs/UnixConstants;");if(null===c)return a.throwNewException("Ljava/lang/InternalError;","UnixConstants is not initialized?"),null;UnixConstants=c.getConstructor(a)}var d=flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_SYNC"])||flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_DSYNC"]),e=flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_EXCL"]|UnixConstants["sun/nio/fs/UnixConstants/O_CREAT"]);return flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_RDONLY"])?d?"rs":"r":flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_WRONLY"])?b&UnixConstants["sun/nio/fs/UnixConstants/O_APPEND"]?e?"ax":"a":e?"wx":"w":flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_RDWR"])?flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_APPEND"])?e?"ax+":"a+":flagTest(b,UnixConstants["sun/nio/fs/UnixConstants/O_CREAT"])?e?"wx+":"w+":d?"rs+":"r+":(a.throwNewException("Lsun/nio/fs/UnixException;","Invalid open flag: "+b+"."),null)}function throwNodeError(a,b){convertError(a,b,function(b){a.throwException(b)})}function date2components(a){var b=a.getTime();return[Math.floor(b/1e3),b%1e3*1e6]}var Doppio=require("../doppiojvm"),util=Doppio.VM.Util,Long=Doppio.VM.Long,ThreadStatus=Doppio.VM.Enums.ThreadStatus,fs=require("fs"),sun_nio_ch_FileChannelImpl=function(){function a(){}return a["map0(IJJ)J"]=function(a,b,c,d,e){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),null},a["unmap0(JJ)I"]=function(a,b,c){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),0},a["position0(Ljava/io/FileDescriptor;J)J"]=function(a,b,c,d){return Long.fromNumber(d.equals(Long.NEG_ONE)?c.$pos:c.$pos=d.toNumber())},a["initIDs()J"]=function(a){return Long.fromNumber(4096)},a}(),sun_nio_ch_NativeThread=function(){function a(){}return a["current()J"]=function(a){return Long.fromNumber(-1)},a["signal(J)V"]=function(a,b){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["init()V"]=function(a){},a}(),sun_nio_ch_IOUtil=function(){function a(){}return a["iovMax()I"]=function(a){return 0},a}(),sun_nio_ch_FileDispatcherImpl=function(){function a(){}return a["init()V"]=function(a){},a["read0(Ljava/io/FileDescriptor;JI)I"]=function(a,b,c,d){var e=b["java/io/FileDescriptor/fd"],f=c.toNumber(),g=a.getJVM().getHeap().get_buffer(f,d);a.setStatus(ThreadStatus.ASYNC_WAITING),fs.read(e,g,0,d,null,function(b,c){b?a.throwNewException("Ljava/io/IOException;","Error reading file: "+b):a.asyncReturn(c)})},a["preClose0(Ljava/io/FileDescriptor;)V"]=function(a,b){},a["close0(Ljava/io/FileDescriptor;)V"]=function(b,c){a["closeIntFD(I)V"](b,c["java/io/FileDescriptor/fd"])},a["size0(Ljava/io/FileDescriptor;)J"]=function(a,b){var c=b["java/io/FileDescriptor/fd"];a.setStatus(ThreadStatus.ASYNC_WAITING),fs.fstat(c,function(b,c){b?throwNodeError(a,b):a.asyncReturn(Long.fromNumber(c.size),null)})},a["truncate0(Ljava/io/FileDescriptor;J)I"]=function(a,b,c){var d=b["java/io/FileDescriptor/fd"];a.setStatus(ThreadStatus.ASYNC_WAITING),fs.ftruncate(d,c.toNumber(),function(b){b?throwNodeError(a,b):a.asyncReturn(0)})},a["closeIntFD(I)V"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.close(b,function(b){b?throwNodeError(a,b):a.asyncReturn()})},a}(),DirFd=function(){function a(a){this._pos=0,this._listing=a}return a.prototype.next=function(){var a=this._listing[this._pos++];return void 0===a&&(a=null),a},a}(),FDMap=function(){function a(){this._map={}}return a.prototype.newEntry=function(b){var c=a._nextFd++;return this._map[c]=b,c},a.prototype.removeEntry=function(a,b,c){this._map[b]?delete this._map[b]:a.throwNewException(c,"Invalid file descriptor: "+b)},a.prototype.getEntry=function(a,b,c){var d=this._map[c];return d?d:(a.throwNewException(b,"Invalid file descriptor: "+c),null)},a._nextFd=1,a}(),dirMap=new FDMap,fileMap=new FDMap,UnixConstants=null,sun_nio_fs_UnixNativeDispatcher=function(){function a(){}return a["getcwd()[B"]=function(a){var b,c=new Buffer(process.cwd()+"\x00","utf8"),d=c.length,e=util.newArray(a,a.getBsCl(),"[B",d);for(b=0;d>b;b++)e.array[b]=c.readInt8(b);return e},a["dup(I)I"]=function(a,b){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),0},a["open0(JII)I"]=function(a,b,c,d){var e=flag2nodeflag(a,c);if(null!==e){a.setStatus(ThreadStatus.ASYNC_WAITING);var f=getStringFromHeap(a,b);fs.open(f,e,d,function(b,c){b?throwNodeError(a,b):a.asyncReturn(c)})}},a["openat0(IJII)I"]=function(a,b,c,d,e){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),0},a["close(I)V"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.close(b,function(b){b?throwNodeError(a,b):a.asyncReturn()})},a["fopen0(JJ)J"]=function(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING);var d=getStringFromHeap(a,b),e=getStringFromHeap(a,c);fs.open(d,e,function(b,c){b?throwNodeError(a,b):a.asyncReturn(Long.fromNumber(c),null)})},a["fclose(J)V"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.close(b.toNumber(),function(b){b?throwNodeError(a,b):a.asyncReturn()})},a["link0(JJ)V"]=function(a,b,c){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["unlink0(J)V"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.unlink(getStringFromHeap(a,b),function(b){b?throwNodeError(a,b):a.asyncReturn()})},a["unlinkat0(IJI)V"]=function(a,b,c,d){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["mknod0(JIJ)V"]=function(a,b,c,d){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["rename0(JJ)V"]=function(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.rename(getStringFromHeap(a,b),getStringFromHeap(a,c),function(b){b?throwNodeError(a,b):a.asyncReturn()})},a["renameat0(IJIJ)V"]=function(a,b,c,d,e){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["mkdir0(JI)V"]=function(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.mkdir(getStringFromHeap(a,b),c,function(b){b?throwNodeError(a,b):a.asyncReturn()})},a["rmdir0(J)V"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.rmdir(getStringFromHeap(a,b),function(b){b?throwNodeError(a,b):a.asyncReturn()})},a["readlink0(J)[B"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.readlink(getStringFromHeap(a,b),function(b,c){b?throwNodeError(a,b):a.asyncReturn(util.initCarr(a.getBsCl(),c))})},a["realpath0(J)[B"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.realpath(getStringFromHeap(a,b),function(b,c){b?throwNodeError(a,b):a.asyncReturn(util.initCarr(a.getBsCl(),c))})},a["symlink0(JJ)V"]=function(a,b,c){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["stat0(JLsun/nio/fs/UnixFileAttributes;)V"]=function(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.stat(getStringFromHeap(a,b),function(b,d){b?throwNodeError(a,b):(convertStats(d,c),a.asyncReturn())})},a["lstat0(JLsun/nio/fs/UnixFileAttributes;)V"]=function(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.lstat(getStringFromHeap(a,b),function(b,d){b?throwNodeError(a,b):(convertStats(d,c),a.asyncReturn())})},a["fstat(ILsun/nio/fs/UnixFileAttributes;)V"]=function(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.fstat(b,function(b,d){b?throwNodeError(a,b):(convertStats(d,c),a.asyncReturn())})},a["fstatat0(IJILsun/nio/fs/UnixFileAttributes;)V"]=function(a,b,c,d,e){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["chown0(JII)V"]=function(a,b,c,d){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["lchown0(JII)V"]=function(a,b,c,d){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["fchown(III)V"]=function(a,b,c,d){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["chmod0(JI)V"]=function(a,b,c){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["fchmod(II)V"]=function(a,b,c){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["utimes0(JJJ)V"]=function(a,b,c,d){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["futimes(IJJ)V"]=function(a,b,c,d){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["opendir0(J)J"]=function(a,b){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.readdir(getStringFromHeap(a,b),function(b,c){b?convertError(a,b,function(b){a.throwException(b)}):a.asyncReturn(Long.fromNumber(dirMap.newEntry(new DirFd(c))),null)})},a["fdopendir(I)J"]=function(a,b){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),null},a["closedir(J)V"]=function(a,b){dirMap.removeEntry(a,b.toNumber(),"Lsun/nio/fs/UnixException;")},a["readdir(J)[B"]=function(a,b){var c=dirMap.getEntry(a,"Lsun/nio/fs/UnixException;",b.toNumber());return c?stringToByteArray(a,c.next()):void 0},a["read(IJI)I"]=function(a,b,c,d){a.setStatus(ThreadStatus.ASYNC_WAITING);var e=a.getJVM().getHeap().get_buffer(c.toNumber(),d);fs.read(b,e,0,d,null,function(b,c){b?throwNodeError(a,b):a.asyncReturn(c)})},a["write(IJI)I"]=function(a,b,c,d){a.setStatus(ThreadStatus.ASYNC_WAITING);var e=a.getJVM().getHeap().get_buffer(c.toNumber(),d);fs.write(b,e,0,d,null,function(b,c){b?throwNodeError(a,b):a.asyncReturn(c)})},a["access0(JI)V"]=function(a,b,c){a.setStatus(ThreadStatus.ASYNC_WAITING);var d=getStringFromHeap(a,b),e=util.are_in_browser()?fs.stat:fs.access;e(d,function(b,c){b?throwNodeError(a,b):a.asyncReturn()})},a["getpwuid(I)[B"]=function(a,b){return util.initCarr(a.getBsCl(),"doppio")},a["getgrgid(I)[B"]=function(a,b){return util.initCarr(a.getBsCl(),"doppio")},a["getpwnam0(J)I"]=function(a,b){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),0},a["getgrnam0(J)I"]=function(a,b){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),0},a["statvfs0(JLsun/nio/fs/UnixFileStoreAttributes;)V"]=function(a,b,c){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["pathconf0(JI)J"]=function(a,b,c){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),null},a["fpathconf(II)J"]=function(a,b,c){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),null},a["strerror(I)[B"]=function(a,b){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),null},a["init()I"]=function(a){return 0},a}();registerNatives({"sun/nio/ch/FileChannelImpl":sun_nio_ch_FileChannelImpl,"sun/nio/ch/NativeThread":sun_nio_ch_NativeThread,"sun/nio/ch/IOUtil":sun_nio_ch_IOUtil,"sun/nio/ch/FileDispatcherImpl":sun_nio_ch_FileDispatcherImpl,"sun/nio/fs/UnixNativeDispatcher":sun_nio_fs_UnixNativeDispatcher});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9uYXRpdmVzL3N1bl9uaW8udHMiXSwibmFtZXMiOlsiZ2V0U3RyaW5nRnJvbUhlYXAiLCJzdHJpbmdUb0J5dGVBcnJheSIsImNvbnZlcnRFcnJvciIsImNvbnZlcnRTdGF0cyIsImZsYWdUZXN0IiwiZmxhZzJub2RlZmxhZyIsInRocm93Tm9kZUVycm9yIiwiZGF0ZTJjb21wb25lbnRzIiwic3VuX25pb19jaF9GaWxlQ2hhbm5lbEltcGwiLCJzdW5fbmlvX2NoX0ZpbGVDaGFubmVsSW1wbC5tYXAwKElKSilKIiwic3VuX25pb19jaF9GaWxlQ2hhbm5lbEltcGwudW5tYXAwKEpKKUkiLCJzdW5fbmlvX2NoX0ZpbGVDaGFubmVsSW1wbC5wb3NpdGlvbjAoTGphdmEvaW8vRmlsZURlc2NyaXB0b3I7SilKIiwic3VuX25pb19jaF9GaWxlQ2hhbm5lbEltcGwuaW5pdElEcygpSiIsInN1bl9uaW9fY2hfTmF0aXZlVGhyZWFkIiwic3VuX25pb19jaF9OYXRpdmVUaHJlYWQuY3VycmVudCgpSiIsInN1bl9uaW9fY2hfTmF0aXZlVGhyZWFkLnNpZ25hbChKKVYiLCJzdW5fbmlvX2NoX0lPVXRpbCIsInN1bl9uaW9fY2hfSU9VdGlsLmlvdk1heCgpSSIsInN1bl9uaW9fY2hfRmlsZURpc3BhdGNoZXJJbXBsIiwic3VuX25pb19jaF9GaWxlRGlzcGF0Y2hlckltcGwucmVhZDAoTGphdmEvaW8vRmlsZURlc2NyaXB0b3I7SkkpSSIsInN1bl9uaW9fY2hfRmlsZURpc3BhdGNoZXJJbXBsLmNsb3NlMChMamF2YS9pby9GaWxlRGVzY3JpcHRvcjspViIsInN1bl9uaW9fY2hfRmlsZURpc3BhdGNoZXJJbXBsLnNpemUwKExqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yOylKIiwic3VuX25pb19jaF9GaWxlRGlzcGF0Y2hlckltcGwudHJ1bmNhdGUwKExqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yO0opSSIsInN1bl9uaW9fY2hfRmlsZURpc3BhdGNoZXJJbXBsLmNsb3NlSW50RkQoSSlWIiwiRGlyRmQiLCJEaXJGZC5jb25zdHJ1Y3RvciIsIkRpckZkLm5leHQiLCJGRE1hcCIsIkZETWFwLmNvbnN0cnVjdG9yIiwiRkRNYXAubmV3RW50cnkiLCJGRE1hcC5yZW1vdmVFbnRyeSIsIkZETWFwLmdldEVudHJ5Iiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlciIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZ2V0Y3dkKClbQiIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZHVwKEkpSSIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIub3BlbjAoSklJKUkiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLm9wZW5hdDAoSUpJSSlJIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5jbG9zZShJKVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLmZvcGVuMChKSilKIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5mY2xvc2UoSilWIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5saW5rMChKSilWIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci51bmxpbmswKEopViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIudW5saW5rYXQwKElKSSlWIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5ta25vZDAoSklKKVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLnJlbmFtZTAoSkopViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIucmVuYW1lYXQwKElKSUopViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIubWtkaXIwKEpJKVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLnJtZGlyMChKKVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLnJlYWRsaW5rMChKKVtCIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5yZWFscGF0aDAoSilbQiIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuc3ltbGluazAoSkopViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuc3RhdDAoSkxzdW4vbmlvL2ZzL1VuaXhGaWxlQXR0cmlidXRlczspViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIubHN0YXQwKEpMc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXM7KVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLmZzdGF0KElMc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXM7KVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLmZzdGF0YXQwKElKSUxzdW4vbmlvL2ZzL1VuaXhGaWxlQXR0cmlidXRlczspViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuY2hvd24wKEpJSSlWIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5sY2hvd24wKEpJSSlWIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5mY2hvd24oSUlJKVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLmNobW9kMChKSSlWIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5mY2htb2QoSUkpViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIudXRpbWVzMChKSkopViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZnV0aW1lcyhJSkopViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIub3BlbmRpcjAoSilKIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5mZG9wZW5kaXIoSSlKIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5jbG9zZWRpcihKKVYiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLnJlYWRkaXIoSilbQiIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIucmVhZChJSkkpSSIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIud3JpdGUoSUpJKUkiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLmFjY2VzczAoSkkpViIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZ2V0cHd1aWQoSSlbQiIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZ2V0Z3JnaWQoSSlbQiIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZ2V0cHduYW0wKEopSSIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZ2V0Z3JuYW0wKEopSSIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuc3RhdHZmczAoSkxzdW4vbmlvL2ZzL1VuaXhGaWxlU3RvcmVBdHRyaWJ1dGVzOylWIiwic3VuX25pb19mc19Vbml4TmF0aXZlRGlzcGF0Y2hlci5wYXRoY29uZjAoSkkpSiIsInN1bl9uaW9fZnNfVW5peE5hdGl2ZURpc3BhdGNoZXIuZnBhdGhjb25mKElJKUoiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLnN0cmVycm9yKEkpW0IiLCJzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyLmluaXQoKUkiXSwibWFwcGluZ3MiOiJBQXdMQSxRQUFBLG1CQUEyQixFQUFtQixHQUk1Q0EsSUFIQUEsR0FBSUEsR0FBT0EsRUFBT0EsU0FBU0EsVUFDdkJBLEVBQU1BLEVBQVFBLFdBQ2RBLEVBQU1BLEVBQ2lDQSxJQUFwQ0EsRUFBS0EsZ0JBQWdCQSxFQUFNQSxJQUNoQ0EsR0FFRkEsT0FBT0EsR0FBS0EsV0FBV0EsRUFBS0EsR0FBS0EsV0FHbkMsUUFBQSxtQkFBMkIsRUFBbUIsR0FDNUNDLElBQUtBLEVBQ0hBLE1BQU9BLEtBS1RBLEtBQUtBLEdBRkNBLEdBQU9BLEdBQUlB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S3hDLEVBQUFBLG9EQUFkQSxTQUFpRUEsRUFBbUJBLEVBQVlBLEdBQzlGeUMsRUFBT0Esa0JBQWtCQSxtQ0FBb0NBLG1DQUdqRHpDLEVBQUFBLGtCQUFkQSxTQUErQkEsRUFBbUJBLEVBQVlBLEdBRTVEMEMsTUFEQUEsR0FBT0Esa0JBQWtCQSxtQ0FBb0NBLGtDQUN0REEsTUFHSzFDLEVBQUFBLGtCQUFkQSxTQUErQkEsRUFBbUJBLEVBQWNBLEdBRTlEMkMsTUFEQUEsR0FBT0Esa0JBQWtCQSxtQ0FBb0NBLGtDQUN0REEsTUFHSzNDLEVBQUFBLGlCQUFkQSxTQUE4QkEsRUFBbUJBLEdBRS9DNEMsTUFEQUEsR0FBT0Esa0JBQWtCQSxtQ0FBb0NBLGtDQUN0REEsTUFHSzVDLEVBQUFBLFdBQWRBLFNBQXdCQSxHQUN0QjZDLE1BQU9BLElBR1g3QyxJQUVBLGtCQUNFLDZCQUE4QiwyQkFDOUIsMEJBQTJCLHdCQUMzQixvQkFBcUIsa0JBQ3JCLGdDQUFpQyw4QkFDakMsa0NBQW1DIiwiZmlsZSI6InN1bl9uaW8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSlZNVHlwZXMgPSByZXF1aXJlKCcuLi8uLi9pbmNsdWRlcy9KVk1UeXBlcycpO1xuaW1wb3J0ICogYXMgRG9wcGlvIGZyb20gJy4uL2RvcHBpb2p2bSc7XG5pbXBvcnQgSlZNVGhyZWFkID0gRG9wcGlvLlZNLlRocmVhZGluZy5KVk1UaHJlYWQ7XG5pbXBvcnQgUmVmZXJlbmNlQ2xhc3NEYXRhID0gRG9wcGlvLlZNLkNsYXNzRmlsZS5SZWZlcmVuY2VDbGFzc0RhdGE7XG5pbXBvcnQgbG9nZ2luZyA9IERvcHBpby5EZWJ1Zy5Mb2dnaW5nO1xuaW1wb3J0IHV0aWwgPSBEb3BwaW8uVk0uVXRpbDtcbmltcG9ydCBMb25nID0gRG9wcGlvLlZNLkxvbmc7XG5pbXBvcnQgVGhyZWFkU3RhdHVzID0gRG9wcGlvLlZNLkVudW1zLlRocmVhZFN0YXR1cztcbmltcG9ydCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5kZWNsYXJlIHZhciByZWdpc3Rlck5hdGl2ZXM6IChkZWZzOiBhbnkpID0+IHZvaWQ7XG5cbmNsYXNzIHN1bl9uaW9fY2hfRmlsZUNoYW5uZWxJbXBsIHtcblxuICBwdWJsaWMgc3RhdGljICdtYXAwKElKSilKJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLnN1bl9uaW9fY2hfRmlsZUNoYW5uZWxJbXBsLCBhcmcwOiBudW1iZXIsIGFyZzE6IExvbmcsIGFyZzI6IExvbmcpOiBMb25nIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICAgIC8vIFNhdGlzZnkgVHlwZVNjcmlwdCByZXR1cm4gdHlwZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3VubWFwMChKSilJJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogTG9uZywgYXJnMTogTG9uZyk6IG51bWJlciB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICAvLyBTYXRpc2Z5IFR5cGVTY3JpcHQgcmV0dXJuIHR5cGUuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdwb3NpdGlvbjAoTGphdmEvaW8vRmlsZURlc2NyaXB0b3I7SilKJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLnN1bl9uaW9fY2hfRmlsZUNoYW5uZWxJbXBsLCBmZDogSlZNVHlwZXMuamF2YV9pb19GaWxlRGVzY3JpcHRvciwgb2Zmc2V0OiBMb25nKTogTG9uZyB7XG4gICAgcmV0dXJuIExvbmcuZnJvbU51bWJlcihvZmZzZXQuZXF1YWxzKExvbmcuTkVHX09ORSkgPyBmZC4kcG9zIDogZmQuJHBvcyA9IG9mZnNldC50b051bWJlcigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aGlzIHBvb3JseS1uYW1lZCBtZXRob2QgYWN0dWFsbHkgc3BlY2lmaWVzIHRoZSBwYWdlIHNpemUgZm9yIG1tYXBcbiAgICogVGhpcyBpcyB0aGUgTWFjIG5hbWUgZm9yIHN1bi9taXNjL1Vuc2FmZTo6cGFnZVNpemUuIEFwcGFyZW50bHkgdGhleVxuICAgKiB3YW50ZWQgdG8gZW5zdXJlIHBhZ2Ugc2l6ZXMgY2FuIGJlID4gMkdCLi4uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljICdpbml0SURzKClKJyh0aHJlYWQ6IEpWTVRocmVhZCk6IExvbmcge1xuICAgIC8vIFNpemUgb2YgaGVhcCBwYWdlcy5cbiAgICByZXR1cm4gTG9uZy5mcm9tTnVtYmVyKDQwOTYpO1xuICB9XG5cbn1cblxuY2xhc3Mgc3VuX25pb19jaF9OYXRpdmVUaHJlYWQge1xuXG4gIHB1YmxpYyBzdGF0aWMgJ2N1cnJlbnQoKUonKHRocmVhZDogSlZNVGhyZWFkKTogTG9uZyB7XG4gICAgLy8gLTEgbWVhbnMgdGhhdCB3ZSBkbyBub3QgcmVxdWlyZSBzaWduYWxpbmcgYWNjb3JkaW5nIHRvIHRoZVxuICAgIC8vIGRvY3MuXG4gICAgcmV0dXJuIExvbmcuZnJvbU51bWJlcigtMSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdzaWduYWwoSilWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogTG9uZyk6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdpbml0KClWJyh0aHJlYWQ6IEpWTVRocmVhZCk6IHZvaWQge1xuICAgIC8vIE5PUFxuICB9XG5cbn1cblxuY2xhc3Mgc3VuX25pb19jaF9JT1V0aWwge1xuXG4gIHB1YmxpYyBzdGF0aWMgJ2lvdk1heCgpSScodGhyZWFkOiBKVk1UaHJlYWQpOiBudW1iZXIge1xuICAgIC8vIE1heGltdW0gbnVtYmVyIG9mIElPVmVjdG9ycyBzdXBwb3J0ZWQuIExldCdzIHB1bnQgYW5kIHNheSB6ZXJvLlxuICAgIHJldHVybiAwO1xuICB9XG5cbn1cblxuY2xhc3Mgc3VuX25pb19jaF9GaWxlRGlzcGF0Y2hlckltcGwge1xuXG4gIHB1YmxpYyBzdGF0aWMgJ2luaXQoKVYnKHRocmVhZDogSlZNVGhyZWFkKTogdm9pZCB7XG5cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3JlYWQwKExqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yO0pJKUknKHRocmVhZDogSlZNVGhyZWFkLCBmZE9iajogSlZNVHlwZXMuamF2YV9pb19GaWxlRGVzY3JpcHRvciwgYWRkcmVzczogTG9uZywgbGVuOiBudW1iZXIpOiB2b2lkIHtcbiAgICB2YXIgZmQgPSBmZE9ialtcImphdmEvaW8vRmlsZURlc2NyaXB0b3IvZmRcIl0sXG4gICAgICAvLyByZWFkIHVwdG8gbGVuIGJ5dGVzIGFuZCBzdG9yZSBpbnRvIG1tYXAnZCBidWZmZXIgYXQgYWRkcmVzc1xuICAgICAgYWRkciA9IGFkZHJlc3MudG9OdW1iZXIoKSxcbiAgICAgIGJ1ZiA9IHRocmVhZC5nZXRKVk0oKS5nZXRIZWFwKCkuZ2V0X2J1ZmZlcihhZGRyLCBsZW4pO1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLnJlYWQoZmQsIGJ1ZiwgMCwgbGVuLCBudWxsLCAoZXJyLCBieXRlc1JlYWQpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKFwiTGphdmEvaW8vSU9FeGNlcHRpb247XCIsICdFcnJvciByZWFkaW5nIGZpbGU6ICcgKyBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKGJ5dGVzUmVhZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdwcmVDbG9zZTAoTGphdmEvaW8vRmlsZURlc2NyaXB0b3I7KVYnKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGVEZXNjcmlwdG9yKTogdm9pZCB7XG4gICAgLy8gTk9QLCBJIHRoaW5rIHRoZSBhY3R1YWwgZnMuY2xvc2UgaXMgY2FsbGVkIGxhdGVyLiBJZiBub3QsIE5CRC5cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2Nsb3NlMChMamF2YS9pby9GaWxlRGVzY3JpcHRvcjspVicodGhyZWFkOiBKVk1UaHJlYWQsIGZkT2JqOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGVEZXNjcmlwdG9yKTogdm9pZCB7XG4gICAgc3VuX25pb19jaF9GaWxlRGlzcGF0Y2hlckltcGxbJ2Nsb3NlSW50RkQoSSlWJ10odGhyZWFkLCBmZE9ialtcImphdmEvaW8vRmlsZURlc2NyaXB0b3IvZmRcIl0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnc2l6ZTAoTGphdmEvaW8vRmlsZURlc2NyaXB0b3I7KUonKHRocmVhZDogSlZNVGhyZWFkLCBmZE9iajogSlZNVHlwZXMuamF2YV9pb19GaWxlRGVzY3JpcHRvcik6IHZvaWQge1xuICAgIGxldCBmZCA9IGZkT2JqW1wiamF2YS9pby9GaWxlRGVzY3JpcHRvci9mZFwiXTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5mc3RhdChmZCwgKGVyciwgc3RhdHMpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKExvbmcuZnJvbU51bWJlcihzdGF0cy5zaXplKSwgbnVsbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICd0cnVuY2F0ZTAoTGphdmEvaW8vRmlsZURlc2NyaXB0b3I7SilJJyh0aHJlYWQ6IEpWTVRocmVhZCwgZmRPYmo6IEpWTVR5cGVzLmphdmFfaW9fRmlsZURlc2NyaXB0b3IsIHNpemU6IExvbmcpOiB2b2lkIHtcbiAgICBsZXQgZmQgPSBmZE9ialtcImphdmEvaW8vRmlsZURlc2NyaXB0b3IvZmRcIl07XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMuZnRydW5jYXRlKGZkLCBzaXplLnRvTnVtYmVyKCksIChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uLCB0aGlzIGV4cGVjdHMgYSByZXR1cm4gdmFsdWUuXG4gICAgICAgIC8vIEdpdmUgaXQgdGhlIHN1Y2Nlc3Mgc3RhdHVzIGNvZGUuXG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2Nsb3NlSW50RkQoSSlWJyh0aHJlYWQ6IEpWTVRocmVhZCwgZmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLmNsb3NlKGZkLCAoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbn1cblxuY2xhc3MgRGlyRmQge1xuICBwcml2YXRlIF9saXN0aW5nOiBzdHJpbmdbXTtcbiAgcHJpdmF0ZSBfcG9zOiBudW1iZXIgPSAwO1xuICBjb25zdHJ1Y3RvcihsaXN0aW5nOiBzdHJpbmdbXSkge1xuICAgIHRoaXMuX2xpc3RpbmcgPSBsaXN0aW5nO1xuICB9XG5cbiAgcHVibGljIG5leHQoKTogc3RyaW5nIHtcbiAgICB2YXIgbmV4dCA9IHRoaXMuX2xpc3RpbmdbdGhpcy5fcG9zKytdO1xuICAgIGlmIChuZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG5leHQgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dDtcbiAgfVxufVxuXG5jbGFzcyBGRE1hcDxUPiB7XG4gIHByaXZhdGUgc3RhdGljIF9uZXh0RmQgPSAxO1xuICBwcml2YXRlIF9tYXA6IHtbZmQ6IG51bWJlcl06IFR9ID0ge307XG5cbiAgcHVibGljIG5ld0VudHJ5KGVudHJ5OiBUKTogbnVtYmVyIHtcbiAgICB2YXIgZmQgPSBGRE1hcC5fbmV4dEZkKys7XG4gICAgdGhpcy5fbWFwW2ZkXSA9IGVudHJ5O1xuICAgIHJldHVybiBmZDtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVFbnRyeSh0aHJlYWQ6IEpWTVRocmVhZCwgZmQ6IG51bWJlciwgZXhjZXB0aW9uVHlwZTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX21hcFtmZF0pIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9tYXBbZmRdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oZXhjZXB0aW9uVHlwZSwgYEludmFsaWQgZmlsZSBkZXNjcmlwdG9yOiAke2ZkfWApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRFbnRyeSh0aHJlYWQ6IEpWTVRocmVhZCwgZXhjZXB0aW9uVHlwZTogc3RyaW5nLCBmZDogbnVtYmVyKTogVCB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5fbWFwW2ZkXTtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oZXhjZXB0aW9uVHlwZSwgYEludmFsaWQgZmlsZSBkZXNjcmlwdG9yOiAke2ZkfWApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGRpck1hcCA9IG5ldyBGRE1hcDxEaXJGZD4oKSxcbiAgZmlsZU1hcCA9IG5ldyBGRE1hcDxudW1iZXI+KCk7XG5cbmZ1bmN0aW9uIGdldFN0cmluZ0Zyb21IZWFwKHRocmVhZDogSlZNVGhyZWFkLCBwdHJMb25nOiBMb25nKTogc3RyaW5nIHtcbiAgdmFyIGhlYXAgPSB0aHJlYWQuZ2V0SlZNKCkuZ2V0SGVhcCgpLFxuICAgICAgcHRyID0gcHRyTG9uZy50b051bWJlcigpLFxuICAgICAgbGVuID0gMDtcbiAgd2hpbGUgKGhlYXAuZ2V0X3NpZ25lZF9ieXRlKHB0ciArIGxlbikgIT09IDApIHtcbiAgICBsZW4rKztcbiAgfVxuICByZXR1cm4gaGVhcC5nZXRfYnVmZmVyKHB0ciwgbGVuKS50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdUb0J5dGVBcnJheSh0aHJlYWQ6IEpWTVRocmVhZCwgc3RyOiBzdHJpbmcpOiBKVk1UeXBlcy5KVk1BcnJheTxudW1iZXI+IHtcbiAgaWYgKCFzdHIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGJ1ZmYgPSBuZXcgQnVmZmVyKHN0ciwgJ3V0ZjgnKSwgbGVuID0gYnVmZi5sZW5ndGgsXG4gICAgYXJyID0gdXRpbC5uZXdBcnJheTxudW1iZXI+KHRocmVhZCwgdGhyZWFkLmdldEJzQ2woKSwgJ1tCJywgbGVuKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGFyci5hcnJheVtpXSA9IGJ1ZmYucmVhZFVJbnQ4KGkpO1xuICB9XG4gIHJldHVybiBhcnI7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRFcnJvcih0aHJlYWQ6IEpWTVRocmVhZCwgZXJyOiBOb2RlSlMuRXJybm9FeGNlcHRpb24sIGNiOiAoZXJyOiBKVk1UeXBlcy5qYXZhX2xhbmdfRXhjZXB0aW9uKSA9PiB2b2lkKTogdm9pZCB7XG4gIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICBpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgdGhyZWFkLmdldEJzQ2woKS5pbml0aWFsaXplQ2xhc3ModGhyZWFkLCAnTGphdmEvbmlvL2ZpbGUvTm9TdWNoRmlsZUV4Y2VwdGlvbjsnLCAobm9TdWNoRmlsZUV4Y2VwdGlvbikgPT4ge1xuICAgICAgY29uc3QgY29ucyA9ICg8UmVmZXJlbmNlQ2xhc3NEYXRhPEpWTVR5cGVzLmphdmFfbmlvX2ZpbGVfTm9TdWNoRmlsZUV4Y2VwdGlvbj4+IG5vU3VjaEZpbGVFeGNlcHRpb24pLmdldENvbnN0cnVjdG9yKHRocmVhZCksXG4gICAgICBydiA9IG5ldyBjb25zKHRocmVhZCk7XG4gICAgICBydlsnPGluaXQ+KExqYXZhL2xhbmcvU3RyaW5nOylWJ10odGhyZWFkLCBbdXRpbC5pbml0U3RyaW5nKHRocmVhZC5nZXRCc0NsKCksIGVyci5wYXRoKV0sIChlKSA9PiB7XG4gICAgICAgIHRocmVhZC50aHJvd0V4Y2VwdGlvbihydik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChlcnIuY29kZSA9PT0gJ0VFWElTVCcpIHtcbiAgICB0aHJlYWQuZ2V0QnNDbCgpLmluaXRpYWxpemVDbGFzcyh0aHJlYWQsICdMamF2YS9uaW8vZmlsZS9GaWxlQWxyZWFkeUV4aXN0c0V4Y2VwdGlvbjsnLCAoZmlsZUFscmVhZHlFeGlzdHNFeGNlcHRpb24pID0+IHtcbiAgICAgIGNvbnN0IGNvbnMgPSAoPFJlZmVyZW5jZUNsYXNzRGF0YTxKVk1UeXBlcy5qYXZhX25pb19maWxlX0ZpbGVBbHJlYWR5RXhpc3RzRXhjZXB0aW9uPj4gZmlsZUFscmVhZHlFeGlzdHNFeGNlcHRpb24pLmdldENvbnN0cnVjdG9yKHRocmVhZCksXG4gICAgICBydiA9IG5ldyBjb25zKHRocmVhZCk7XG4gICAgICBydlsnPGluaXQ+KExqYXZhL2xhbmcvU3RyaW5nOylWJ10odGhyZWFkLCBbdXRpbC5pbml0U3RyaW5nKHRocmVhZC5nZXRCc0NsKCksIGVyci5wYXRoKV0sIChlKSA9PiB7XG4gICAgICAgIGNiKHJ2KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRocmVhZC5nZXRCc0NsKCkuaW5pdGlhbGl6ZUNsYXNzKHRocmVhZCwgJ0xzdW4vbmlvL2ZzL1VuaXhFeGNlcHRpb247JywgKHVuaXhFeGNlcHRpb24pID0+IHtcbiAgICAgIHRocmVhZC5nZXRCc0NsKCkuaW5pdGlhbGl6ZUNsYXNzKHRocmVhZCwgJ0xzdW4vbmlvL2ZzL1VuaXhDb25zdGFudHM7JywgKHVuaXhDb25zdGFudHMpID0+IHtcbiAgICAgICAgICB2YXIgY29ucyA9ICg8UmVmZXJlbmNlQ2xhc3NEYXRhPEpWTVR5cGVzLnN1bl9uaW9fZnNfVW5peEV4Y2VwdGlvbj4+IHVuaXhFeGNlcHRpb24pLmdldENvbnN0cnVjdG9yKHRocmVhZCksXG4gICAgICAgICAgICBydiA9IG5ldyBjb25zKHRocmVhZCksXG4gICAgICAgICAgICB1bml4Q29uczogdHlwZW9mIEpWTVR5cGVzLnN1bl9uaW9fZnNfVW5peENvbnN0YW50cyA9IDxhbnk+ICg8UmVmZXJlbmNlQ2xhc3NEYXRhPEpWTVR5cGVzLnN1bl9uaW9fZnNfVW5peENvbnN0YW50cz4+IHVuaXhDb25zdGFudHMpLmdldENvbnN0cnVjdG9yKHRocmVhZCksXG4gICAgICAgICAgICBlcnJDb2RlOiBudW1iZXIgPSAoPGFueT4gdW5peENvbnMpW2BzdW4vbmlvL2ZzL1VuaXhDb25zdGFudHMvJHtlcnIuY29kZX1gXTtcbiAgICAgICAgICBpZiAodHlwZW9mKGVyckNvZGUpICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgZXJyQ29kZSA9IC0xO1xuICAgICAgICAgIH1cbiAgICAgICAgICBydlsnc3VuL25pby9mcy9Vbml4RXhjZXB0aW9uL2Vycm5vJ10gPSBlcnJDb2RlO1xuICAgICAgICAgIHJ2WydzdW4vbmlvL2ZzL1VuaXhFeGNlcHRpb24vbXNnJ10gPSB1dGlsLmluaXRTdHJpbmcodGhyZWFkLmdldEJzQ2woKSwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgIGNiKHJ2KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRTdGF0cyhzdGF0czogZnMuU3RhdHMsIGp2bVN0YXRzOiBKVk1UeXBlcy5zdW5fbmlvX2ZzX1VuaXhGaWxlQXR0cmlidXRlcyk6IHZvaWQge1xuICBqdm1TdGF0c1snc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXMvc3RfbW9kZSddID0gc3RhdHMubW9kZTtcbiAganZtU3RhdHNbJ3N1bi9uaW8vZnMvVW5peEZpbGVBdHRyaWJ1dGVzL3N0X2lubyddID0gTG9uZy5mcm9tTnVtYmVyKHN0YXRzLmlubyk7XG4gIGp2bVN0YXRzWydzdW4vbmlvL2ZzL1VuaXhGaWxlQXR0cmlidXRlcy9zdF9kZXYnXSA9IExvbmcuZnJvbU51bWJlcihzdGF0cy5kZXYpO1xuICBqdm1TdGF0c1snc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXMvc3RfcmRldiddID0gTG9uZy5mcm9tTnVtYmVyKHN0YXRzLnJkZXYpO1xuICBqdm1TdGF0c1snc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXMvc3RfbmxpbmsnXSA9IHN0YXRzLm5saW5rO1xuICBqdm1TdGF0c1snc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXMvc3RfdWlkJ10gPSBzdGF0cy51aWQ7XG4gIGp2bVN0YXRzWydzdW4vbmlvL2ZzL1VuaXhGaWxlQXR0cmlidXRlcy9zdF9naWQnXSA9IHN0YXRzLmdpZDtcbiAganZtU3RhdHNbJ3N1bi9uaW8vZnMvVW5peEZpbGVBdHRyaWJ1dGVzL3N0X3NpemUnXSA9IExvbmcuZnJvbU51bWJlcihzdGF0cy5zaXplKTtcbiAgbGV0IGF0aW1lID0gZGF0ZTJjb21wb25lbnRzKHN0YXRzLmF0aW1lKSxcbiAgICBtdGltZSA9IGRhdGUyY29tcG9uZW50cyhzdGF0cy5tdGltZSksXG4gICAgY3RpbWUgPSBkYXRlMmNvbXBvbmVudHMoc3RhdHMuY3RpbWUpO1xuICBqdm1TdGF0c1snc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXMvc3RfYXRpbWVfc2VjJ10gPSBMb25nLmZyb21OdW1iZXIoYXRpbWVbMF0pO1xuICBqdm1TdGF0c1snc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXMvc3RfYXRpbWVfbnNlYyddID0gTG9uZy5mcm9tTnVtYmVyKGF0aW1lWzFdKTtcbiAganZtU3RhdHNbJ3N1bi9uaW8vZnMvVW5peEZpbGVBdHRyaWJ1dGVzL3N0X210aW1lX3NlYyddID0gTG9uZy5mcm9tTnVtYmVyKG10aW1lWzBdKTtcbiAganZtU3RhdHNbJ3N1bi9uaW8vZnMvVW5peEZpbGVBdHRyaWJ1dGVzL3N0X210aW1lX25zZWMnXSA9IExvbmcuZnJvbU51bWJlcihtdGltZVsxXSk7XG4gIGp2bVN0YXRzWydzdW4vbmlvL2ZzL1VuaXhGaWxlQXR0cmlidXRlcy9zdF9jdGltZV9zZWMnXSA9IExvbmcuZnJvbU51bWJlcihjdGltZVswXSk7XG4gIGp2bVN0YXRzWydzdW4vbmlvL2ZzL1VuaXhGaWxlQXR0cmlidXRlcy9zdF9jdGltZV9uc2VjJ10gPSBMb25nLmZyb21OdW1iZXIoY3RpbWVbMV0pO1xuICBqdm1TdGF0c1snc3VuL25pby9mcy9Vbml4RmlsZUF0dHJpYnV0ZXMvc3RfYmlydGh0aW1lX3NlYyddID0gTG9uZy5mcm9tTnVtYmVyKE1hdGguZmxvb3Ioc3RhdHMuYmlydGh0aW1lLmdldFRpbWUoKSAvIDEwMDApKTtcbn1cblxubGV0IFVuaXhDb25zdGFudHM6IHR5cGVvZiBKVk1UeXBlcy5zdW5fbmlvX2ZzX1VuaXhDb25zdGFudHMgPSBudWxsO1xuZnVuY3Rpb24gZmxhZ1Rlc3QoZmxhZzogbnVtYmVyLCBtYXNrOiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIChmbGFnICYgbWFzaykgPT09IG1hc2s7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBudW1lcmljYWwgVW5peCBvcGVuKCkgZmxhZyB0byBhIE5vZGVKUyBzdHJpbmcgb3BlbigpIGZsYWcuXG4gKiBSZXR1cm5zIE5VTEwgdXBvbiBmYWlsdXJlOyB0aHJvd3MgYSBVbml4RXhjZXB0aW9uIG9uIHRocmVhZCB3aGVuIHRoYXQgaGFwcGVucy5cbiAqL1xuZnVuY3Rpb24gZmxhZzJub2RlZmxhZyh0aHJlYWQ6IEpWTVRocmVhZCwgZmxhZzogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKFVuaXhDb25zdGFudHMgPT09IG51bGwpIHtcbiAgICBsZXQgVUNDbHMgPSA8UmVmZXJlbmNlQ2xhc3NEYXRhPEpWTVR5cGVzLnN1bl9uaW9fZnNfVW5peENvbnN0YW50cz4+IHRocmVhZC5nZXRCc0NsKCkuZ2V0SW5pdGlhbGl6ZWRDbGFzcyh0aHJlYWQsICdMc3VuL25pby9mcy9Vbml4Q29uc3RhbnRzOycpO1xuICAgIGlmIChVQ0NscyA9PT0gbnVsbCkge1xuICAgICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKFwiTGphdmEvbGFuZy9JbnRlcm5hbEVycm9yO1wiLCBcIlVuaXhDb25zdGFudHMgaXMgbm90IGluaXRpYWxpemVkP1wiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBVbml4Q29uc3RhbnRzID0gPGFueT4gVUNDbHMuZ2V0Q29uc3RydWN0b3IodGhyZWFkKTtcbiAgfVxuXG4gIGxldCBzeW5jID0gZmxhZ1Rlc3QoZmxhZywgVW5peENvbnN0YW50c1snc3VuL25pby9mcy9Vbml4Q29uc3RhbnRzL09fU1lOQyddKSB8fCBmbGFnVGVzdChmbGFnLCBVbml4Q29uc3RhbnRzWydzdW4vbmlvL2ZzL1VuaXhDb25zdGFudHMvT19EU1lOQyddKTtcbiAgbGV0IGZhaWxJZkV4aXN0cyA9IGZsYWdUZXN0KGZsYWcsIFVuaXhDb25zdGFudHNbJ3N1bi9uaW8vZnMvVW5peENvbnN0YW50cy9PX0VYQ0wnXSB8IFVuaXhDb25zdGFudHNbJ3N1bi9uaW8vZnMvVW5peENvbnN0YW50cy9PX0NSRUFUJ10pO1xuXG4gIGlmIChmbGFnVGVzdChmbGFnLCBVbml4Q29uc3RhbnRzWydzdW4vbmlvL2ZzL1VuaXhDb25zdGFudHMvT19SRE9OTFknXSkpIHtcbiAgICAvLyAncicgLSBPcGVuIGZpbGUgZm9yIHJlYWRpbmcuIEFuIGV4Y2VwdGlvbiBvY2N1cnMgaWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QuXG4gICAgLy8gJ3JzJyAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBpbiBzeW5jaHJvbm91cyBtb2RlLiBJbnN0cnVjdHMgdGhlIG9wZXJhdGluZyBzeXN0ZW0gdG8gYnlwYXNzIHRoZSBsb2NhbCBmaWxlIHN5c3RlbSBjYWNoZS5cbiAgICByZXR1cm4gc3luYyA/ICdycycgOiAncic7XG4gIH0gZWxzZSBpZiAoZmxhZ1Rlc3QoZmxhZywgVW5peENvbnN0YW50c1snc3VuL25pby9mcy9Vbml4Q29uc3RhbnRzL09fV1JPTkxZJ10pKSB7XG4gICAgaWYgKGZsYWcgJiBVbml4Q29uc3RhbnRzWydzdW4vbmlvL2ZzL1VuaXhDb25zdGFudHMvT19BUFBFTkQnXSkge1xuICAgICAgLy8gJ2F4JyAtIExpa2UgJ2EnIGJ1dCBmYWlscyBpZiBwYXRoIGV4aXN0cy5cbiAgICAgIC8vICdhJyAtIE9wZW4gZmlsZSBmb3IgYXBwZW5kaW5nLiBUaGUgZmlsZSBpcyBjcmVhdGVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICAgICAgcmV0dXJuIGZhaWxJZkV4aXN0cyA/ICdheCcgOiAnYSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vICd3JyAtIE9wZW4gZmlsZSBmb3Igd3JpdGluZy4gVGhlIGZpbGUgaXMgY3JlYXRlZCAoaWYgaXQgZG9lcyBub3QgZXhpc3QpIG9yIHRydW5jYXRlZCAoaWYgaXQgZXhpc3RzKS5cbiAgICAgIC8vICd3eCcgLSBMaWtlICd3JyBidXQgZmFpbHMgaWYgcGF0aCBleGlzdHMuXG4gICAgICByZXR1cm4gZmFpbElmRXhpc3RzID8gJ3d4JyA6ICd3JztcbiAgICB9XG4gIH0gZWxzZSBpZiAoZmxhZ1Rlc3QoZmxhZywgVW5peENvbnN0YW50c1snc3VuL25pby9mcy9Vbml4Q29uc3RhbnRzL09fUkRXUiddKSkge1xuICAgIGlmIChmbGFnVGVzdChmbGFnLCBVbml4Q29uc3RhbnRzWydzdW4vbmlvL2ZzL1VuaXhDb25zdGFudHMvT19BUFBFTkQnXSkpIHtcbiAgICAgIC8vICdhKycgLSBPcGVuIGZpbGUgZm9yIHJlYWRpbmcgYW5kIGFwcGVuZGluZy4gVGhlIGZpbGUgaXMgY3JlYXRlZCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAgICAgIC8vICdheCsnIC0gTGlrZSAnYSsnIGJ1dCBmYWlscyBpZiBwYXRoIGV4aXN0cy5cbiAgICAgIHJldHVybiBmYWlsSWZFeGlzdHMgPyAnYXgrJyA6ICdhKyc7XG4gICAgfSBlbHNlIGlmIChmbGFnVGVzdChmbGFnLCBVbml4Q29uc3RhbnRzWydzdW4vbmlvL2ZzL1VuaXhDb25zdGFudHMvT19DUkVBVCddKSkge1xuICAgICAgLy8gJ3crJyAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBhbmQgd3JpdGluZy4gVGhlIGZpbGUgaXMgY3JlYXRlZCAoaWYgaXQgZG9lcyBub3QgZXhpc3QpIG9yIHRydW5jYXRlZCAoaWYgaXQgZXhpc3RzKS5cbiAgICAgIC8vICd3eCsnIC0gTGlrZSAndysnIGJ1dCBmYWlscyBpZiBwYXRoIGV4aXN0cy5cbiAgICAgIHJldHVybiBmYWlsSWZFeGlzdHMgPyAnd3grJyA6ICd3Kyc7XG4gICAgICByZXR1cm4gJ3d4Kyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vICdyKycgLSBPcGVuIGZpbGUgZm9yIHJlYWRpbmcgYW5kIHdyaXRpbmcuIEFuIGV4Y2VwdGlvbiBvY2N1cnMgaWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QuXG4gICAgICAvLyAncnMrJyAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBhbmQgd3JpdGluZywgdGVsbGluZyB0aGUgT1MgdG8gb3BlbiBpdCBzeW5jaHJvbm91c2x5LlxuICAgICAgcmV0dXJuIHN5bmMgPyAncnMrJyA6ICdyKyc7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTHN1bi9uaW8vZnMvVW5peEV4Y2VwdGlvbjsnLCBgSW52YWxpZCBvcGVuIGZsYWc6ICR7ZmxhZ30uYCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGhyb3dOb2RlRXJyb3IodGhyZWFkOiBKVk1UaHJlYWQsIGVycjogTm9kZUpTLkVycm5vRXhjZXB0aW9uKTogdm9pZCB7XG4gIGNvbnZlcnRFcnJvcih0aHJlYWQsIGVyciwgKGNvbnZlcnRlZEVycikgPT4ge1xuICAgIHRocmVhZC50aHJvd0V4Y2VwdGlvbihjb252ZXJ0ZWRFcnIpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIERhdGUgb2JqZWN0IGludG8gW3NlY29uZHMsIG5hbm9zZWNvbmRzXS5cbiAqL1xuZnVuY3Rpb24gZGF0ZTJjb21wb25lbnRzKGRhdGU6IERhdGUpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgbGV0IGRhdGVJbk1zID0gZGF0ZS5nZXRUaW1lKCk7XG4gIHJldHVybiBbTWF0aC5mbG9vcihkYXRlSW5NcyAvIDEwMDApLCAoZGF0ZUluTXMgJSAxMDAwKSAqIDEwMDAwMDBdO1xufVxuXG5jbGFzcyBzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyIHtcblxuICBwdWJsaWMgc3RhdGljICdnZXRjd2QoKVtCJyh0aHJlYWQ6IEpWTVRocmVhZCk6IEpWTVR5cGVzLkpWTUFycmF5PG51bWJlcj4ge1xuICAgIHZhciBidWZmID0gbmV3IEJ1ZmZlcihgJHtwcm9jZXNzLmN3ZCgpfVxcMGAsICd1dGY4JyksIGxlbiA9IGJ1ZmYubGVuZ3RoLFxuICAgICAgcnYgPSB1dGlsLm5ld0FycmF5PG51bWJlcj4odGhyZWFkLCB0aHJlYWQuZ2V0QnNDbCgpLCAnW0InLCBsZW4pLFxuICAgICAgaTogbnVtYmVyO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBydi5hcnJheVtpXSA9IGJ1ZmYucmVhZEludDgoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ2O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZHVwKEkpSScodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ29wZW4wKEpJSSlJJyh0aHJlYWQ6IEpWTVRocmVhZCwgcGF0aEFkZHJlc3M6IExvbmcsIGZsYWdzOiBudW1iZXIsIG1vZGU6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEVzc2VudGlhbGx5LCBjb252ZXJ0IG9wZW4oKSBhcmdzIHRvIGZvcGVuKCkgYXJncy5cbiAgICBsZXQgZmxhZ1N0ciA9IGZsYWcybm9kZWZsYWcodGhyZWFkLCBmbGFncyk7XG4gICAgaWYgKGZsYWdTdHIgIT09IG51bGwpIHtcbiAgICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgICAgbGV0IHBhdGhTdHIgPSBnZXRTdHJpbmdGcm9tSGVhcCh0aHJlYWQsIHBhdGhBZGRyZXNzKTtcbiAgICAgIGZzLm9wZW4ocGF0aFN0ciwgZmxhZ1N0ciwgbW9kZSwgKGVyciwgZmQpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oZmQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdvcGVuYXQwKElKSUkpSScodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IG51bWJlciwgYXJnMTogTG9uZywgYXJnMjogbnVtYmVyLCBhcmczOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdjbG9zZShJKVYnKHRocmVhZDogSlZNVGhyZWFkLCBmZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMuY2xvc2UoZmQsIChlcnI/KSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZm9wZW4wKEpKKUonKHRocmVhZDogSlZNVGhyZWFkLCBwYXRoQWRkcmVzczogTG9uZywgZmxhZ3NBZGRyZXNzOiBMb25nKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgbGV0IHBhdGhTdHIgPSBnZXRTdHJpbmdGcm9tSGVhcCh0aHJlYWQsIHBhdGhBZGRyZXNzKTtcbiAgICBsZXQgZmxhZ3NTdHIgPSBnZXRTdHJpbmdGcm9tSGVhcCh0aHJlYWQsIGZsYWdzQWRkcmVzcyk7XG4gICAgZnMub3BlbihwYXRoU3RyLCBmbGFnc1N0ciwgKGVyciwgZmQpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKExvbmcuZnJvbU51bWJlcihmZCksIG51bGwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZmNsb3NlKEopVicodGhyZWFkOiBKVk1UaHJlYWQsIGZkOiBMb25nKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMuY2xvc2UoZmQudG9OdW1iZXIoKSwgKGVycj8pID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdsaW5rMChKSilWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogTG9uZywgYXJnMTogTG9uZyk6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICd1bmxpbmswKEopVicodGhyZWFkOiBKVk1UaHJlYWQsIHBhdGhBZGRyZXNzOiBMb25nKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMudW5saW5rKGdldFN0cmluZ0Zyb21IZWFwKHRocmVhZCwgcGF0aEFkZHJlc3MpLCAoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAndW5saW5rYXQwKElKSSlWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogbnVtYmVyLCBhcmcxOiBMb25nLCBhcmcyOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnbWtub2QwKEpJSilWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogTG9uZywgYXJnMTogbnVtYmVyLCBhcmcyOiBMb25nKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3JlbmFtZTAoSkopVicodGhyZWFkOiBKVk1UaHJlYWQsIG9sZEFkZHI6IExvbmcsIG5ld0FkZHI6IExvbmcpOiB2b2lkIHtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5yZW5hbWUoZ2V0U3RyaW5nRnJvbUhlYXAodGhyZWFkLCBvbGRBZGRyKSwgZ2V0U3RyaW5nRnJvbUhlYXAodGhyZWFkLCBuZXdBZGRyKSwgKGVycikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3JlbmFtZWF0MChJSklKKVYnKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBudW1iZXIsIGFyZzE6IExvbmcsIGFyZzI6IG51bWJlciwgYXJnMzogTG9uZyk6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdta2RpcjAoSkkpVicodGhyZWFkOiBKVk1UaHJlYWQsIHBhdGhBZGRyOiBMb25nLCBtb2RlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5ta2RpcihnZXRTdHJpbmdGcm9tSGVhcCh0aHJlYWQsIHBhdGhBZGRyKSwgbW9kZSwgKGVycikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3JtZGlyMChKKVYnKHRocmVhZDogSlZNVGhyZWFkLCBwYXRoQWRkcjogTG9uZyk6IHZvaWQge1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLnJtZGlyKGdldFN0cmluZ0Zyb21IZWFwKHRocmVhZCwgcGF0aEFkZHIpLCAoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAncmVhZGxpbmswKEopW0InKHRocmVhZDogSlZNVGhyZWFkLCBwYXRoQWRkcjogTG9uZyk6IHZvaWQge1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLnJlYWRsaW5rKGdldFN0cmluZ0Zyb21IZWFwKHRocmVhZCwgcGF0aEFkZHIpLCAoZXJyLCBsaW5rUGF0aCkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4odXRpbC5pbml0Q2Fycih0aHJlYWQuZ2V0QnNDbCgpLCBsaW5rUGF0aCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAncmVhbHBhdGgwKEopW0InKHRocmVhZDogSlZNVGhyZWFkLCBwYXRoQWRkcmVzczogTG9uZyk6IHZvaWQge1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLnJlYWxwYXRoKGdldFN0cmluZ0Zyb21IZWFwKHRocmVhZCwgcGF0aEFkZHJlc3MpLCAoZXJyLCByZXNvbHZlZFBhdGgpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKHV0aWwuaW5pdENhcnIodGhyZWFkLmdldEJzQ2woKSwgcmVzb2x2ZWRQYXRoKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdzeW1saW5rMChKSilWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogTG9uZywgYXJnMTogTG9uZyk6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdzdGF0MChKTHN1bi9uaW8vZnMvVW5peEZpbGVBdHRyaWJ1dGVzOylWJyh0aHJlYWQ6IEpWTVRocmVhZCwgcGF0aEFkZHJlc3M6IExvbmcsIGp2bVN0YXRzOiBKVk1UeXBlcy5zdW5fbmlvX2ZzX1VuaXhGaWxlQXR0cmlidXRlcyk6IHZvaWQge1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLnN0YXQoZ2V0U3RyaW5nRnJvbUhlYXAodGhyZWFkLCBwYXRoQWRkcmVzcyksIChlcnIsIHN0YXRzKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnZlcnRTdGF0cyhzdGF0cywganZtU3RhdHMpO1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2xzdGF0MChKTHN1bi9uaW8vZnMvVW5peEZpbGVBdHRyaWJ1dGVzOylWJyh0aHJlYWQ6IEpWTVRocmVhZCwgcGF0aEFkZHJlc3M6IExvbmcsIGp2bVN0YXRzOiBKVk1UeXBlcy5zdW5fbmlvX2ZzX1VuaXhGaWxlQXR0cmlidXRlcyk6IHZvaWQge1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLmxzdGF0KGdldFN0cmluZ0Zyb21IZWFwKHRocmVhZCwgcGF0aEFkZHJlc3MpLCAoZXJyLCBzdGF0cykgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb252ZXJ0U3RhdHMoc3RhdHMsIGp2bVN0YXRzKTtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdmc3RhdChJTHN1bi9uaW8vZnMvVW5peEZpbGVBdHRyaWJ1dGVzOylWJyh0aHJlYWQ6IEpWTVRocmVhZCwgZmQ6IG51bWJlciwganZtU3RhdHM6IEpWTVR5cGVzLnN1bl9uaW9fZnNfVW5peEZpbGVBdHRyaWJ1dGVzKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMuZnN0YXQoZmQsIChlcnIsIHN0YXRzKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnZlcnRTdGF0cyhzdGF0cywganZtU3RhdHMpO1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2ZzdGF0YXQwKElKSUxzdW4vbmlvL2ZzL1VuaXhGaWxlQXR0cmlidXRlczspVicodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IG51bWJlciwgYXJnMTogTG9uZywgYXJnMjogbnVtYmVyLCBhcmczOiBKVk1UeXBlcy5zdW5fbmlvX2ZzX1VuaXhGaWxlQXR0cmlidXRlcyk6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdjaG93bjAoSklJKVYnKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBMb25nLCBhcmcxOiBudW1iZXIsIGFyZzI6IG51bWJlcik6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdsY2hvd24wKEpJSSlWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogTG9uZywgYXJnMTogbnVtYmVyLCBhcmcyOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZmNob3duKElJSSlWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogbnVtYmVyLCBhcmcxOiBudW1iZXIsIGFyZzI6IG51bWJlcik6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdjaG1vZDAoSkkpVicodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IExvbmcsIGFyZzE6IG51bWJlcik6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdmY2htb2QoSUkpVicodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IG51bWJlciwgYXJnMTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3V0aW1lczAoSkpKKVYnKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBMb25nLCBhcmcxOiBMb25nLCBhcmcyOiBMb25nKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2Z1dGltZXMoSUpKKVYnKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBudW1iZXIsIGFyZzE6IExvbmcsIGFyZzI6IExvbmcpOiB2b2lkIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnb3BlbmRpcjAoSilKJyh0aHJlYWQ6IEpWTVRocmVhZCwgcHRyOiBMb25nKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMucmVhZGRpcihnZXRTdHJpbmdGcm9tSGVhcCh0aHJlYWQsIHB0ciksIChlcnIsIGZpbGVzKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnZlcnRFcnJvcih0aHJlYWQsIGVyciwgKGVyck9iaikgPT4ge1xuICAgICAgICAgIHRocmVhZC50aHJvd0V4Y2VwdGlvbihlcnJPYmopO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybihMb25nLmZyb21OdW1iZXIoZGlyTWFwLm5ld0VudHJ5KG5ldyBEaXJGZChmaWxlcykpKSwgbnVsbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdmZG9wZW5kaXIoSSlKJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogbnVtYmVyKTogTG9uZyB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2Nsb3NlZGlyKEopVicodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IExvbmcpOiB2b2lkIHtcbiAgICBkaXJNYXAucmVtb3ZlRW50cnkodGhyZWFkLCBhcmcwLnRvTnVtYmVyKCksICdMc3VuL25pby9mcy9Vbml4RXhjZXB0aW9uOycpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAncmVhZGRpcihKKVtCJyh0aHJlYWQ6IEpWTVRocmVhZCwgZmQ6IExvbmcpOiBKVk1UeXBlcy5KVk1BcnJheTxudW1iZXI+IHtcbiAgICB2YXIgZGlyRmQgPSBkaXJNYXAuZ2V0RW50cnkodGhyZWFkLCAnTHN1bi9uaW8vZnMvVW5peEV4Y2VwdGlvbjsnLCBmZC50b051bWJlcigpKTtcbiAgICBpZiAoZGlyRmQpIHtcbiAgICAgIHJldHVybiBzdHJpbmdUb0J5dGVBcnJheSh0aHJlYWQsIGRpckZkLm5leHQoKSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyAncmVhZChJSkkpSScodGhyZWFkOiBKVk1UaHJlYWQsIGZkOiBudW1iZXIsIGJ1ZjogTG9uZywgbmJ5dGU6IG51bWJlcik6IHZvaWQge1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGxldCBidWZmID0gdGhyZWFkLmdldEpWTSgpLmdldEhlYXAoKS5nZXRfYnVmZmVyKGJ1Zi50b051bWJlcigpLCBuYnl0ZSk7XG4gICAgZnMucmVhZChmZCwgYnVmZiwgMCwgbmJ5dGUsIG51bGwsIChlcnIsIGJ5dGVzUmVhZCkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oYnl0ZXNSZWFkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3dyaXRlKElKSSlJJyh0aHJlYWQ6IEpWTVRocmVhZCwgZmQ6IG51bWJlciwgYnVmOiBMb25nLCBuYnl0ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgbGV0IGJ1ZmYgPSB0aHJlYWQuZ2V0SlZNKCkuZ2V0SGVhcCgpLmdldF9idWZmZXIoYnVmLnRvTnVtYmVyKCksIG5ieXRlKTtcbiAgICBmcy53cml0ZShmZCwgYnVmZiwgMCwgbmJ5dGUsIG51bGwsIChlcnIsIGJ5dGVzV3JpdHRlbikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oYnl0ZXNXcml0dGVuKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2FjY2VzczAoSkkpVicodGhyZWFkOiBKVk1UaHJlYWQsIHBhdGhBZGRyZXNzOiBMb25nLCBhcmcxOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICAvLyBUT0RPOiBOZWVkIHRvIGNoZWNrIHNwZWNpZmljIGZsYWdzXG4gICAgY29uc3QgcGF0aFN0cmluZyA9IGdldFN0cmluZ0Zyb21IZWFwKHRocmVhZCwgcGF0aEFkZHJlc3MpO1xuICAgIC8vIFRPRE86IGZzLmFjY2VzcygpIGlzIGJldHRlciBidXQgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gYnJvd3NlcmZzOiBodHRwczovL2dpdGh1Yi5jb20vanZpbGsvQnJvd3NlckZTL2lzc3Vlcy8xMjhcbiAgICBjb25zdCBjaGVja2VyID0gdXRpbC5hcmVfaW5fYnJvd3NlcigpID8gZnMuc3RhdCA6IGZzLmFjY2VzcztcbiAgICBjaGVja2VyKHBhdGhTdHJpbmcsIChlcnIsIHN0YXQpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdnZXRwd3VpZChJKVtCJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogbnVtYmVyKTogSlZNVHlwZXMuSlZNQXJyYXk8bnVtYmVyPiB7XG4gICAgLy8gTWFrZSBzb21ldGhpbmcgdXAuXG4gICAgcmV0dXJuIHV0aWwuaW5pdENhcnIodGhyZWFkLmdldEJzQ2woKSwgJ2RvcHBpbycpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZ2V0Z3JnaWQoSSlbQicodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IG51bWJlcik6IEpWTVR5cGVzLkpWTUFycmF5PG51bWJlcj4ge1xuICAgIC8vIE1ha2Ugc29tZXRoaW5nIHVwLlxuICAgIHJldHVybiB1dGlsLmluaXRDYXJyKHRocmVhZC5nZXRCc0NsKCksICdkb3BwaW8nKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2dldHB3bmFtMChKKUknKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBMb25nKTogbnVtYmVyIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZ2V0Z3JuYW0wKEopSScodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IExvbmcpOiBudW1iZXIge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdzdGF0dmZzMChKTHN1bi9uaW8vZnMvVW5peEZpbGVTdG9yZUF0dHJpYnV0ZXM7KVYnKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBMb25nLCBhcmcxOiBKVk1UeXBlcy5zdW5fbmlvX2ZzX1VuaXhGaWxlU3RvcmVBdHRyaWJ1dGVzKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3BhdGhjb25mMChKSSlKJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogTG9uZywgYXJnMTogbnVtYmVyKTogTG9uZyB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2ZwYXRoY29uZihJSSlKJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogbnVtYmVyLCBhcmcxOiBudW1iZXIpOiBMb25nIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnc3RyZXJyb3IoSSlbQicodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IG51bWJlcik6IEpWTVR5cGVzLkpWTUFycmF5PG51bWJlcj4ge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdpbml0KClJJyh0aHJlYWQ6IEpWTVRocmVhZCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxufVxuXG5yZWdpc3Rlck5hdGl2ZXMoe1xuICAnc3VuL25pby9jaC9GaWxlQ2hhbm5lbEltcGwnOiBzdW5fbmlvX2NoX0ZpbGVDaGFubmVsSW1wbCxcbiAgJ3N1bi9uaW8vY2gvTmF0aXZlVGhyZWFkJzogc3VuX25pb19jaF9OYXRpdmVUaHJlYWQsXG4gICdzdW4vbmlvL2NoL0lPVXRpbCc6IHN1bl9uaW9fY2hfSU9VdGlsLFxuICAnc3VuL25pby9jaC9GaWxlRGlzcGF0Y2hlckltcGwnOiBzdW5fbmlvX2NoX0ZpbGVEaXNwYXRjaGVySW1wbCxcbiAgJ3N1bi9uaW8vZnMvVW5peE5hdGl2ZURpc3BhdGNoZXInOiBzdW5fbmlvX2ZzX1VuaXhOYXRpdmVEaXNwYXRjaGVyXG59KTtcbiJdfQ==
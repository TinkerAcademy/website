function throwNodeError(a,b){var c="Ljava/io/IOException;";"ENOENT"===b.code&&(c="Ljava/io/FileNotFoundException;"),a.throwNewException(c,b.message)}function async_input(a,b){var c=function(a){var b=process.stdin.read(a);return null===b&&(b=process.stdin.read()),null!==b&&1===b.length&&0===b.readUInt8(0)&&(b=new Buffer(0)),b},d=c(a);null===d?process.stdin.once("readable",function(d){var e=c(a);null===e&&(e=new Buffer(0)),b(e)}):setImmediate(function(){b(d)})}function statFile(a,b){fs.stat(a,function(a,c){b(null!=a?null:c)})}var fs=require("fs"),path=require("path"),Doppio=require("../doppiojvm"),util=Doppio.VM.Util,ThreadStatus=Doppio.VM.Enums.ThreadStatus,Long=Doppio.VM.Long,java_io_Console=function(){function a(){}return a["encoding()Ljava/lang/String;"]=function(a){return null},a["echo(Z)Z"]=function(a,b){var c=!b;return process.stdin.setRawMode(c),c},a["istty()Z"]=function(a){return process.stdout.isTTY},a}(),java_io_FileDescriptor=function(){function a(){}return a["sync()V"]=function(a,b){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["initIDs()V"]=function(a){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a}(),java_io_FileInputStream=function(){function a(){}return a["open0(Ljava/lang/String;)V"]=function(a,b,c){var d=c.toString();a.setStatus(ThreadStatus.ASYNC_WAITING),fs.open(d,"r",function(c,e){if(null!=c)"ENOENT"===c.code?a.throwNewException("Ljava/io/FileNotFoundException;",""+d+" (No such file or directory)"):a.throwNewException("Ljava/lang/InternalError","Internal JVM error: "+c);else{var f=b["java/io/FileInputStream/fd"];f["java/io/FileDescriptor/fd"]=e,f.$pos=0,a.asyncReturn()}})},a["read0()I"]=function(a,b){var c=b["java/io/FileInputStream/fd"],d=c["java/io/FileDescriptor/fd"];if(-1===d)a.throwNewException("Ljava/io/IOException;","Bad file descriptor");else if(0!==d){a.setStatus(ThreadStatus.ASYNC_WAITING);var e=new Buffer(1);fs.read(d,e,0,1,c.$pos,function(b,d){return b?throwNodeError(a,b):(c.$pos++,void a.asyncReturn(0===d?-1:e.readUInt8(0)))})}else a.setStatus(ThreadStatus.ASYNC_WAITING),async_input(1,function(b){a.asyncReturn(0===b.length?-1:b.readUInt8(0))})},a["readBytes([BII)I"]=function(a,b,c,d,e){var f,g,h=b["java/io/FileInputStream/fd"],i=h["java/io/FileDescriptor/fd"];return d+e>c.array.length?void a.throwNewException("Ljava/lang/IndexOutOfBoundsException;",""):0===e?0:void(-1===i?a.throwNewException("Ljava/io/IOException;","Bad file descriptor"):0!==i?(g=h.$pos,f=new Buffer(e),a.setStatus(ThreadStatus.ASYNC_WAITING),fs.read(i,f,0,e,g,function(b,e){if(null!=b)throwNodeError(a,b);else{h.$pos+=e;for(var g=0;e>g;g++)c.array[d+g]=f.readInt8(g);a.asyncReturn(0===e?-1:e)}})):(a.setStatus(ThreadStatus.ASYNC_WAITING),async_input(e,function(b){var e,f;for(f=0;f<b.length;f++)e=b.readUInt8(f),c.array[d+f]=e;a.asyncReturn(0===b.length?-1:b.length)})))},a["skip(J)J"]=function(a,b,c){var d=b["java/io/FileInputStream/fd"],e=d["java/io/FileDescriptor/fd"];-1===e?a.throwNewException("Ljava/io/IOException;","Bad file descriptor"):0!==e?(a.setStatus(ThreadStatus.ASYNC_WAITING),fs.fstat(e,function(b,e){if(b)return throwNodeError(a,b);var f=e.size-d.$pos,g=Math.min(c.toNumber(),f);d.$pos+=g,a.asyncReturn(Long.fromNumber(g),null)})):(a.setStatus(ThreadStatus.ASYNC_WAITING),async_input(c.toNumber(),function(b){a.asyncReturn(Long.fromNumber(b.length),null)}))},a["available()I"]=function(a,b){var c=b["java/io/FileInputStream/fd"],d=c["java/io/FileDescriptor/fd"];if(-1===d)a.throwNewException("Ljava/io/IOException;","Bad file descriptor");else{if(0===d)return 0;a.setStatus(ThreadStatus.ASYNC_WAITING),fs.fstat(d,function(b,d){return b?throwNodeError(a,b):void a.asyncReturn(d.size-c.$pos)})}},a["initIDs()V"]=function(a){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["close0()V"]=function(a,b){var c=b["java/io/FileInputStream/fd"],d=c["java/io/FileDescriptor/fd"];a.setStatus(ThreadStatus.ASYNC_WAITING),fs.close(d,function(b){b?throwNodeError(a,b):(c["java/io/FileDescriptor/fd"]=-1,a.asyncReturn())})},a}(),java_io_FileOutputStream=function(){function a(){}return a["open0(Ljava/lang/String;Z)V"]=function(a,b,c,d){a.setStatus(ThreadStatus.ASYNC_WAITING),fs.open(c.toString(),d?"a":"w",function(c,d){if(c)return throwNodeError(a,c);var e=b["java/io/FileOutputStream/fd"];e["java/io/FileDescriptor/fd"]=d,fs.fstat(d,function(b,c){e.$pos=c.size,a.asyncReturn()})})},a["write(IZ)V"]=function(b,c,d,e){a["writeBytes([BIIZ)V"](b,c,{array:[d]},0,1,e)},a["writeBytes([BIIZ)V"]=function(a,b,c,d,e,f){var g=new Buffer(c.array),h=b["java/io/FileOutputStream/fd"],i=h["java/io/FileDescriptor/fd"];if(-1===i)a.throwNewException("Ljava/io/IOException;","Bad file descriptor");else if(1!==i&&2!==i)a.setStatus(ThreadStatus.ASYNC_WAITING),fs.write(i,g,d,e,h.$pos,function(b,c){return b?throwNodeError(a,b):(h.$pos+=c,void a.asyncReturn())});else{var j=g.toString("utf8",d,d+e);1===i?process.stdout.write(j):2===i&&process.stderr.write(j),a.setStatus(ThreadStatus.ASYNC_WAITING),setImmediate(function(){a.asyncReturn()})}},a["close0()V"]=function(a,b){var c=b["java/io/FileOutputStream/fd"],d=c["java/io/FileDescriptor/fd"];a.setStatus(ThreadStatus.ASYNC_WAITING),fs.close(d,function(b){return b?throwNodeError(a,b):(c["java/io/FileDescriptor/fd"]=-1,void a.asyncReturn())})},a["initIDs()V"]=function(a){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a}(),java_io_ObjectInputStream=function(){function a(){}return a["bytesToFloats([BI[FII)V"]=function(a,b,c,d,e,f){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["bytesToDoubles([BI[DII)V"]=function(a,b,c,d,e,f){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a}(),java_io_ObjectOutputStream=function(){function a(){}return a["floatsToBytes([FI[BII)V"]=function(a,b,c,d,e,f){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["doublesToBytes([DI[BII)V"]=function(a,b,c,d,e,f){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a}(),java_io_ObjectStreamClass=function(){function a(){}return a["initNative()V"]=function(a){},a["hasStaticInitializer(Ljava/lang/Class;)Z"]=function(a,b){return null!==b.$cls.getMethod("<clinit>()V")},a}(),java_io_RandomAccessFile=function(){function a(){}return a["open0(Ljava/lang/String;I)V"]=function(a,b,c,d){var e,f=c.toString(),g=b.getClass().getConstructor(a);switch(d){case g["java/io/RandomAccessFile/O_RDONLY"]:e="r";break;case g["java/io/RandomAccessFile/O_RDWR"]:e="r+";break;case g["java/io/RandomAccessFile/O_SYNC"]:case g["java/io/RandomAccessFile/O_DSYNC"]:e="rs+"}a.setStatus(ThreadStatus.ASYNC_WAITING),fs.open(f,e,function(c,d){if(c)return throwNodeError(a,c);var e=b["java/io/RandomAccessFile/fd"];e["java/io/FileDescriptor/fd"]=d,e.$pos=0,a.asyncReturn()})},a["read0()I"]=function(a,b){var c=b["java/io/RandomAccessFile/fd"],d=c["java/io/FileDescriptor/fd"],e=new Buffer(1);a.setStatus(ThreadStatus.ASYNC_WAITING),fs.read(d,e,0,1,c.$pos,function(b,d){return b?throwNodeError(a,b):(c.$pos+=d,void a.asyncReturn(0===d?-1:e.readUInt8(0)))})},a["readBytes([BII)I"]=function(a,b,c,d,e){var f=b["java/io/RandomAccessFile/fd"],g=f["java/io/FileDescriptor/fd"],h=new Buffer(e);a.setStatus(ThreadStatus.ASYNC_WAITING),fs.read(g,h,0,e,f.$pos,function(b,g){if(b)return throwNodeError(a,b);for(var i=0;g>i;i++)c.array[d+i]=h.readInt8(i);f.$pos+=g,a.asyncReturn(0===g&&0!==e?-1:g)})},a["write0(I)V"]=function(a,b,c){var d=b["java/io/RandomAccessFile/fd"],e=d["java/io/FileDescriptor/fd"],f=new Buffer(1);f.writeInt8(c,0),a.setStatus(ThreadStatus.ASYNC_WAITING),fs.write(e,f,0,1,d.$pos,function(b,c){return b?throwNodeError(a,b):(d.$pos+=c,void a.asyncReturn())})},a["writeBytes([BII)V"]=function(a,b,c,d,e){var f=b["java/io/RandomAccessFile/fd"],g=f["java/io/FileDescriptor/fd"],h=new Buffer(c.array);a.setStatus(ThreadStatus.ASYNC_WAITING),fs.write(g,h,d,e,f.$pos,function(b,c){return b?throwNodeError(a,b):(f.$pos+=c,void a.asyncReturn())})},a["getFilePointer()J"]=function(a,b){return Long.fromNumber(b["java/io/RandomAccessFile/fd"].$pos)},a["seek0(J)V"]=function(a,b,c){b["java/io/RandomAccessFile/fd"].$pos=c.toNumber()},a["length()J"]=function(a,b){var c=b["java/io/RandomAccessFile/fd"],d=c["java/io/FileDescriptor/fd"];a.setStatus(ThreadStatus.ASYNC_WAITING),fs.fstat(d,function(b,c){return b?throwNodeError(a,b):void a.asyncReturn(Long.fromNumber(c.size),null)})},a["setLength(J)V"]=function(a,b,c){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["initIDs()V"]=function(a){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a["close0()V"]=function(a,b){var c=b["java/io/RandomAccessFile/fd"],d=c["java/io/FileDescriptor/fd"];a.setStatus(ThreadStatus.ASYNC_WAITING),fs.close(d,function(b){return b?throwNodeError(a,b):(c["java/io/FileDescriptor/fd"]=-1,void a.asyncReturn())})},a}(),java_io_UnixFileSystem=function(){function a(){}return a["canonicalize0(Ljava/lang/String;)Ljava/lang/String;"]=function(a,b,c){var d=c.toString();return util.initString(a.getBsCl(),path.resolve(path.normalize(d)))},a["getBooleanAttributes0(Ljava/io/File;)I"]=function(a,b,c){var d=c["java/io/File/path"],e=a.getBsCl().getInitializedClass(a,"Ljava/io/FileSystem;").getConstructor(a);a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(d.toString(),function(b){var c=0;null!==b&&(c|=e["java/io/FileSystem/BA_EXISTS"],b.isFile()?c|=e["java/io/FileSystem/BA_REGULAR"]:b.isDirectory()&&(c|=e["java/io/FileSystem/BA_DIRECTORY"])),a.asyncReturn(c)})},a["checkAccess(Ljava/io/File;I)Z"]=function(a,b,c,d){var e=c["java/io/File/path"];a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(e.toString(),function(b){if(null==b)a.asyncReturn(0);else{var c=d|d<<3|d<<6;a.asyncReturn((b.mode&c)>0?1:0)}})},a["getLastModifiedTime(Ljava/io/File;)J"]=function(a,b,c){var d=c["java/io/File/path"];a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(d.toString(),function(b){null==b?a.asyncReturn(Long.ZERO,null):a.asyncReturn(Long.fromNumber(b.mtime.getTime()),null)})},a["getLength(Ljava/io/File;)J"]=function(a,b,c){var d=c["java/io/File/path"];a.setStatus(ThreadStatus.ASYNC_WAITING),fs.stat(d.toString(),function(b,c){a.asyncReturn(null!=b?Long.ZERO:Long.fromNumber(c.size),null)})},a["setPermission(Ljava/io/File;IZZ)Z"]=function(a,b,c,d,e,f){var g=c["java/io/File/path"].toString();f?d<<=6:d|=d<<6|d<<3,e||(d=~d),a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(g,function(b){if(null==b)a.asyncReturn(0);else{var c=b.mode;d=e?c|d:c&d,fs.chmod(g,d,function(b){a.asyncReturn(null!=b?0:1)})}})},a["createFileExclusively(Ljava/lang/String;)Z"]=function(a,b,c){var d=c.toString();a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(d,function(b){null!=b?a.asyncReturn(0):fs.open(d,"w",function(b,c){null!=b?a.throwNewException("Ljava/io/IOException;",b.message):fs.close(c,function(b){null!=b?a.throwNewException("Ljava/io/IOException;",b.message):a.asyncReturn(1)})})})},a["delete0(Ljava/io/File;)Z"]=function(a,b,c){var d=c["java/io/File/path"].toString();a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(d,function(b){null==b?a.asyncReturn(0):b.isDirectory()?fs.readdir(d,function(b,c){c.length>0?a.asyncReturn(0):fs.rmdir(d,function(b){a.asyncReturn(1)})}):fs.unlink(d,function(b){a.asyncReturn(1)})})},a["list(Ljava/io/File;)[Ljava/lang/String;"]=function(a,b,c){var d=c["java/io/File/path"];a.getBsCl();a.setStatus(ThreadStatus.ASYNC_WAITING),fs.readdir(d.toString(),function(b,c){null!=b?a.asyncReturn(null):a.asyncReturn(util.newArrayFromData(a,a.getBsCl(),"[Ljava/lang/String;",c.map(function(b){return util.initString(a.getBsCl(),b)})))})},a["createDirectory(Ljava/io/File;)Z"]=function(a,b,c){var d=c["java/io/File/path"].toString();a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(d,function(b){null!=b?a.asyncReturn(0):fs.mkdir(d,function(b){a.asyncReturn(null!=b?0:1)})})},a["rename0(Ljava/io/File;Ljava/io/File;)Z"]=function(a,b,c,d){var e=c["java/io/File/path"].toString(),f=d["java/io/File/path"].toString();a.setStatus(ThreadStatus.ASYNC_WAITING),fs.rename(e,f,function(b){a.asyncReturn(null!=b?0:1)})},a["setLastModifiedTime(Ljava/io/File;J)Z"]=function(a,b,c,d){var e=d.toNumber(),f=(new Date).getTime(),g=c["java/io/File/path"].toString();a.setStatus(ThreadStatus.ASYNC_WAITING),fs.utimes(g,f,e,function(b){a.asyncReturn(1)})},a["setReadOnly(Ljava/io/File;)Z"]=function(a,b,c){var d=c["java/io/File/path"].toString(),e=-147;a.setStatus(ThreadStatus.ASYNC_WAITING),statFile(d,function(b){null==b?a.asyncReturn(0):fs.chmod(d,b.mode&e,function(b){a.asyncReturn(null!=b?0:1)})})},a["getSpace(Ljava/io/File;I)J"]=function(a,b,c,d){return a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented."),null},a["initIDs()V"]=function(a){a.throwNewException("Ljava/lang/UnsatisfiedLinkError;","Native method not implemented.")},a}();registerNatives({"java/io/Console":java_io_Console,"java/io/FileDescriptor":java_io_FileDescriptor,"java/io/FileInputStream":java_io_FileInputStream,"java/io/FileOutputStream":java_io_FileOutputStream,"java/io/ObjectInputStream":java_io_ObjectInputStream,"java/io/ObjectOutputStream":java_io_ObjectOutputStream,"java/io/ObjectStreamClass":java_io_ObjectStreamClass,"java/io/RandomAccessFile":java_io_RandomAccessFile,"java/io/UnixFileSystem":java_io_UnixFileSystem});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9uYXRpdmVzL2phdmFfaW8udHMiXSwibmFtZXMiOlsidGhyb3dOb2RlRXJyb3IiLCJhc3luY19pbnB1dCIsInN0YXRGaWxlIiwiamF2YV9pb19Db25zb2xlIiwiamF2YV9pb19Db25zb2xlLmVuY29kaW5nKClMamF2YS9sYW5nL1N0cmluZzsiLCJqYXZhX2lvX0NvbnNvbGUuZWNobyhaKVoiLCJqYXZhX2lvX0NvbnNvbGUuaXN0dHkoKVoiLCJqYXZhX2lvX0ZpbGVEZXNjcmlwdG9yIiwiamF2YV9pb19GaWxlRGVzY3JpcHRvci5zeW5jKClWIiwiamF2YV9pb19GaWxlRGVzY3JpcHRvci5pbml0SURzKClWIiwiamF2YV9pb19GaWxlSW5wdXRTdHJlYW0iLCJqYXZhX2lvX0ZpbGVJbnB1dFN0cmVhbS5vcGVuMChMamF2YS9sYW5nL1N0cmluZzspViIsImphdmFfaW9fRmlsZUlucHV0U3RyZWFtLnJlYWQwKClJIiwiamF2YV9pb19GaWxlSW5wdXRTdHJlYW0ucmVhZEJ5dGVzKFtCSUkpSSIsImphdmFfaW9fRmlsZUlucHV0U3RyZWFtLnNraXAoSilKIiwiamF2YV9pb19GaWxlSW5wdXRTdHJlYW0uYXZhaWxhYmxlKClJIiwiamF2YV9pb19GaWxlSW5wdXRTdHJlYW0uaW5pdElEcygpViIsImphdmFfaW9fRmlsZUlucHV0U3RyZWFtLmNsb3NlMCgpViIsImphdmFfaW9fRmlsZU91dHB1dFN0cmVhbSIsImphdmFfaW9fRmlsZU91dHB1dFN0cmVhbS5vcGVuMChMamF2YS9sYW5nL1N0cmluZztaKVYiLCJqYXZhX2lvX0ZpbGVPdXRwdXRTdHJlYW0ud3JpdGUoSVopViIsImphdmFfaW9fRmlsZU91dHB1dFN0cmVhbS53cml0ZUJ5dGVzKFtCSUlaKVYiLCJqYXZhX2lvX0ZpbGVPdXRwdXRTdHJlYW0uY2xvc2UwKClWIiwiamF2YV9pb19GaWxlT3V0cHV0U3RyZWFtLmluaXRJRHMoKVYiLCJqYXZhX2lvX09iamVjdElucHV0U3RyZWFtIiwiamF2YV9pb19PYmplY3RJbnB1dFN0cmVhbS5ieXRlc1RvRmxvYXRzKFtCSVtGSUkpViIsImphdmFfaW9fT2JqZWN0SW5wdXRTdHJlYW0uYnl0ZXNUb0RvdWJsZXMoW0JJW0RJSSlWIiwiamF2YV9pb19PYmplY3RPdXRwdXRTdHJlYW0iLCJqYXZhX2lvX09iamVjdE91dHB1dFN0cmVhbS5mbG9hdHNUb0J5dGVzKFtGSVtCSUkpViIsImphdmFfaW9fT2JqZWN0T3V0cHV0U3RyZWFtLmRvdWJsZXNUb0J5dGVzKFtESVtCSUkpViIsImphdmFfaW9fT2JqZWN0U3RyZWFtQ2xhc3MiLCJqYXZhX2lvX09iamVjdFN0cmVhbUNsYXNzLmhhc1N0YXRpY0luaXRpYWxpemVyKExqYXZhL2xhbmcvQ2xhc3M7KVoiLCJqYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUiLCJqYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUub3BlbjAoTGphdmEvbGFuZy9TdHJpbmc7SSlWIiwiamF2YV9pb19SYW5kb21BY2Nlc3NGaWxlLnJlYWQwKClJIiwiamF2YV9pb19SYW5kb21BY2Nlc3NGaWxlLnJlYWRCeXRlcyhbQklJKUkiLCJqYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUud3JpdGUwKEkpViIsImphdmFfaW9fUmFuZG9tQWNjZXNzRmlsZS53cml0ZUJ5dGVzKFtCSUkpViIsImphdmFfaW9fUmFuZG9tQWNjZXNzRmlsZS5nZXRGaWxlUG9pbnRlcigpSiIsImphdmFfaW9fUmFuZG9tQWNjZXNzRmlsZS5zZWVrMChKKVYiLCJqYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUubGVuZ3RoKClKIiwiamF2YV9pb19SYW5kb21BY2Nlc3NGaWxlLnNldExlbmd0aChKKVYiLCJqYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUuaW5pdElEcygpViIsImphdmFfaW9fUmFuZG9tQWNjZXNzRmlsZS5jbG9zZTAoKVYiLCJqYXZhX2lvX1VuaXhGaWxlU3lzdGVtIiwiamF2YV9pb19Vbml4RmlsZVN5c3RlbS5jYW5vbmljYWxpemUwKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1N0cmluZzsiLCJqYXZhX2lvX1VuaXhGaWxlU3lzdGVtLmdldEJvb2xlYW5BdHRyaWJ1dGVzMChMamF2YS9pby9GaWxlOylJIiwiamF2YV9pb19Vbml4RmlsZVN5c3RlbS5jaGVja0FjY2VzcyhMamF2YS9pby9GaWxlO0kpWiIsImphdmFfaW9fVW5peEZpbGVTeXN0ZW0uZ2V0TGFzdE1vZGlmaWVkVGltZShMamF2YS9pby9GaWxlOylKIiwiamF2YV9pb19Vbml4RmlsZVN5c3RlbS5nZXRMZW5ndGgoTGphdmEvaW8vRmlsZTspSiIsImphdmFfaW9fVW5peEZpbGVTeXN0ZW0uc2V0UGVybWlzc2lvbihMamF2YS9pby9GaWxlO0laWilaIiwiamF2YV9pb19Vbml4RmlsZVN5c3RlbS5jcmVhdGVGaWxlRXhjbHVzaXZlbHkoTGphdmEvbGFuZy9TdHJpbmc7KVoiLCJqYXZhX2lvX1VuaXhGaWxlU3lzdGVtLmRlbGV0ZTAoTGphdmEvaW8vRmlsZTspWiIsImphdmFfaW9fVW5peEZpbGVTeXN0ZW0ubGlzdChMamF2YS9pby9GaWxlOylbTGphdmEvbGFuZy9TdHJpbmc7IiwiamF2YV9pb19Vbml4RmlsZVN5c3RlbS5jcmVhdGVEaXJlY3RvcnkoTGphdmEvaW8vRmlsZTspWiIsImphdmFfaW9fVW5peEZpbGVTeXN0ZW0ucmVuYW1lMChMamF2YS9pby9GaWxlO0xqYXZhL2lvL0ZpbGU7KVoiLCJqYXZhX2lvX1VuaXhGaWxlU3lzdGVtLnNldExhc3RNb2RpZmllZFRpbWUoTGphdmEvaW8vRmlsZTtKKVoiLCJqYXZhX2lvX1VuaXhGaWxlU3lzdGVtLnNldFJlYWRPbmx5KExqYXZhL2lvL0ZpbGU7KVoiLCJqYXZhX2lvX1VuaXhGaWxlU3lzdGVtLmdldFNwYWNlKExqYXZhL2lvL0ZpbGU7SSlKIiwiamF2YV9pb19Vbml4RmlsZVN5c3RlbS5pbml0SURzKClWIl0sIm1hcHBpbmdzIjoiQUFhQSxRQUFBLGdCQUF3QixFQUFtQixHQUN6Q0EsR0FBSUEsR0FBT0EsdUJBQ01BLFlBQWJBLEVBQUlBLE9BQ05B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QSxxQkFBcUJBLFVBQ3ZDQSxHQUFPQSxVQUFVQSxhQUFhQSxlQUM5QkEsR0FBR0EsT0FBT0EsRUFBVUEsRUFBT0EsRUFBT0EsU0FBQ0EsR0FDakNBLEVBQU9BLFlBQVlBLE1BSVRaLEVBQUFBLGdDQUFkQSxTQUE2Q0EsRUFBbUJBLEVBQTJDQSxHQUd6R2EsR0FBSUEsR0FBV0EsRUFBS0EscUJBQXFCQSxXQUN2Q0EsRUFBT0EsSUFDVEEsR0FBT0EsVUFBVUEsYUFBYUEsZUFDOUJBLFNBQVNBLEVBQVVBLFNBQUNBLEdBQ0xBLE1BQVRBLEVBQ0ZBLEVBQU9BLFlBQVlBLEdBRW5CQSxHQUFHQSxNQUFNQSxFQUFVQSxFQUFNQSxLQUFPQSxFQUFNQSxTQUFDQSxHQUNyQ0EsRUFBT0EsWUFBbUJBLE1BQVBBLEVBQWNBLEVBQUlBLFFBTS9CYixFQUFBQSw4QkFBZEEsU0FBMkNBLEVBQW1CQSxFQUEyQ0EsRUFBNkJBLEdBR3BJYyxNQUZBQSxHQUFPQSxrQkFBa0JBLG1DQUFvQ0Esa0NBRXREQSxNQUdLZCxFQUFBQSxjQUFkQSxTQUEyQkEsR0FDekJlLEVBQU9BLGtCQUFrQkEsbUNBQW9DQSxtQ0FHakVmLElBRUEsa0JBQ0Usa0JBQW1CLGdCQUNuQix5QkFBMEIsdUJBQzFCLDBCQUEyQix3QkFDM0IsMkJBQTRCLHlCQUM1Qiw0QkFBNkIsMEJBQzdCLDZCQUE4QiwyQkFDOUIsNEJBQTZCLDBCQUM3QiwyQkFBNEIseUJBQzVCLHlCQUEwQiIsImZpbGUiOiJqYXZhX2lvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmltcG9ydCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuaW1wb3J0ICogYXMgRG9wcGlvIGZyb20gJy4uL2RvcHBpb2p2bSc7XG5pbXBvcnQgSlZNVGhyZWFkID0gRG9wcGlvLlZNLlRocmVhZGluZy5KVk1UaHJlYWQ7XG5pbXBvcnQgUmVmZXJlbmNlQ2xhc3NEYXRhID0gRG9wcGlvLlZNLkNsYXNzRmlsZS5SZWZlcmVuY2VDbGFzc0RhdGE7XG5pbXBvcnQgbG9nZ2luZyA9IERvcHBpby5EZWJ1Zy5Mb2dnaW5nO1xuaW1wb3J0IHV0aWwgPSBEb3BwaW8uVk0uVXRpbDtcbmltcG9ydCBUaHJlYWRTdGF0dXMgPSBEb3BwaW8uVk0uRW51bXMuVGhyZWFkU3RhdHVzO1xuaW1wb3J0IExvbmcgPSBEb3BwaW8uVk0uTG9uZztcbmltcG9ydCBhc3NlcnQgPSBEb3BwaW8uRGVidWcuQXNzZXJ0O1xuaW1wb3J0IEpWTVR5cGVzID0gcmVxdWlyZSgnLi4vLi4vaW5jbHVkZXMvSlZNVHlwZXMnKTtcbmRlY2xhcmUgdmFyIHJlZ2lzdGVyTmF0aXZlczogKGRlZnM6IGFueSkgPT4gdm9pZDtcblxuZnVuY3Rpb24gdGhyb3dOb2RlRXJyb3IodGhyZWFkOiBKVk1UaHJlYWQsIGVycjogTm9kZUpTLkVycm5vRXhjZXB0aW9uKTogdm9pZCB7XG4gIGxldCB0eXBlID0gXCJMamF2YS9pby9JT0V4Y2VwdGlvbjtcIjtcbiAgaWYgKGVyci5jb2RlID09PSBcIkVOT0VOVFwiKSB7XG4gICAgdHlwZSA9ICdMamF2YS9pby9GaWxlTm90Rm91bmRFeGNlcHRpb247JztcbiAgfVxuICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24odHlwZSwgZXJyLm1lc3NhZ2UpO1xufVxuXG4vKipcbiAqIFByb3ZpZGUgYnVmZmVyaW5nIGZvciB0aGUgdW5kZXJseWluZyBpbnB1dCBmdW5jdGlvbiwgcmV0dXJuaW5nIGF0IG1vc3RcbiAqIG5fYnl0ZXMgb2YgZGF0YS5cbiAqL1xuZnVuY3Rpb24gYXN5bmNfaW5wdXQobl9ieXRlczogbnVtYmVyLCByZXN1bWU6IChkYXRhOiBCdWZmZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgLy8gVHJ5IHRvIHJlYWQgbl9ieXRlcyBmcm9tIHN0ZGluJ3MgYnVmZmVyLlxuICB2YXIgcmVhZCA9IGZ1bmN0aW9uIChuQnl0ZXM6IG51bWJlcik6IE5vZGVCdWZmZXIge1xuICAgIC8vIFhYWDogUmV0dXJucyBhIEJ1ZmZlciwgYnV0IERlZmluaXRlbHlUeXBlZCBzYXlzIHN0cmluZ3xCdWZmZXIuXG4gICAgdmFyIGJ5dGVzID0gPEJ1ZmZlcj4gcHJvY2Vzcy5zdGRpbi5yZWFkKG5CeXRlcyk7XG4gICAgaWYgKGJ5dGVzID09PSBudWxsKSB7XG4gICAgICAvLyBXZSBtaWdodCBoYXZlIGFza2VkIGZvciB0b28gbWFueSBieXRlcy4gUmV0cmlldmUgdGhlIGVudGlyZSBzdHJlYW1cbiAgICAgIC8vIGJ1ZmZlci5cbiAgICAgIGJ5dGVzID0gPEJ1ZmZlcj4gcHJvY2Vzcy5zdGRpbi5yZWFkKCk7XG4gICAgfVxuICAgIC8vIFxcMCA9PiBFT0YuXG4gICAgaWYgKGJ5dGVzICE9PSBudWxsICYmIGJ5dGVzLmxlbmd0aCA9PT0gMSAmJiBieXRlcy5yZWFkVUludDgoMCkgPT09IDApIHtcbiAgICAgIGJ5dGVzID0gbmV3IEJ1ZmZlcigwKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzO1xuICB9LCBieXRlczogTm9kZUJ1ZmZlciA9IHJlYWQobl9ieXRlcyk7XG5cbiAgaWYgKGJ5dGVzID09PSBudWxsKSB7XG4gICAgLy8gTm8gaW5wdXQgYXZhaWxhYmxlLiBXYWl0IGZvciBmdXJ0aGVyIGlucHV0LlxuICAgIHByb2Nlc3Muc3RkaW4ub25jZSgncmVhZGFibGUnLCBmdW5jdGlvbiAoZGF0YTogTm9kZUJ1ZmZlcikge1xuICAgICAgdmFyIGJ5dGVzID0gcmVhZChuX2J5dGVzKTtcbiAgICAgIGlmIChieXRlcyA9PT0gbnVsbCkge1xuICAgICAgICBieXRlcyA9IG5ldyBCdWZmZXIoMCk7XG4gICAgICB9XG4gICAgICByZXN1bWUoYnl0ZXMpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIFJlc2V0IHN0YWNrIGRlcHRoIGFuZCByZXN1bWUgd2l0aCB0aGUgZ2l2ZW4gZGF0YS5cbiAgICBzZXRJbW1lZGlhdGUoZnVuY3Rpb24gKCkgeyByZXN1bWUoYnl0ZXMpOyB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGF0RmlsZShmbmFtZTogc3RyaW5nLCBjYjogKHN0YXQ6IGZzLlN0YXRzKSA9PiB2b2lkKTogdm9pZCB7XG4gIGZzLnN0YXQoZm5hbWUsIChlcnIsIHN0YXQpID0+IHtcbiAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgIGNiKG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYihzdGF0KTtcbiAgICB9XG4gIH0pO1xufVxuXG5jbGFzcyBqYXZhX2lvX0NvbnNvbGUge1xuXG4gIHB1YmxpYyBzdGF0aWMgJ2VuY29kaW5nKClMamF2YS9sYW5nL1N0cmluZzsnKHRocmVhZDogSlZNVGhyZWFkKTogSlZNVHlwZXMuamF2YV9sYW5nX1N0cmluZyB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdlY2hvKFopWicodGhyZWFkOiBKVk1UaHJlYWQsIGVjaG9PbjogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHZhciBlY2hvT2ZmOiBib29sZWFuID0gIWVjaG9PbjtcbiAgICAoPGFueT4gcHJvY2Vzcy5zdGRpbikuc2V0UmF3TW9kZShlY2hvT2ZmKTtcbiAgICByZXR1cm4gZWNob09mZjtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2lzdHR5KClaJyh0aHJlYWQ6IEpWTVRocmVhZCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoPGFueT4gcHJvY2Vzcy5zdGRvdXQpLmlzVFRZO1xuICB9XG5cbn1cblxuY2xhc3MgamF2YV9pb19GaWxlRGVzY3JpcHRvciB7XG5cbiAgcHVibGljIHN0YXRpYyAnc3luYygpVicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGVEZXNjcmlwdG9yKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2luaXRJRHMoKVYnKHRocmVhZDogSlZNVGhyZWFkKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG59XG5cbmNsYXNzIGphdmFfaW9fRmlsZUlucHV0U3RyZWFtIHtcblxuICBwdWJsaWMgc3RhdGljICdvcGVuMChMamF2YS9sYW5nL1N0cmluZzspVicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGVJbnB1dFN0cmVhbSwgZmlsZW5hbWU6IEpWTVR5cGVzLmphdmFfbGFuZ19TdHJpbmcpOiB2b2lkIHtcbiAgICB2YXIgZmlsZXBhdGggPSBmaWxlbmFtZS50b1N0cmluZygpO1xuICAgIC8vIFRPRE86IGFjdHVhbGx5IGxvb2sgYXQgdGhlIG1vZGVcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5vcGVuKGZpbGVwYXRoLCAncicsIGZ1bmN0aW9uIChlLCBmZCkge1xuICAgICAgaWYgKGUgIT0gbnVsbCkge1xuICAgICAgICBpZiAoZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvaW8vRmlsZU5vdEZvdW5kRXhjZXB0aW9uOycsIFwiXCIgKyBmaWxlcGF0aCArIFwiIChObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5KVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvSW50ZXJuYWxFcnJvcicsICdJbnRlcm5hbCBKVk0gZXJyb3I6ICcgKyAgZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmZE9iaiA9IGphdmFUaGlzWydqYXZhL2lvL0ZpbGVJbnB1dFN0cmVhbS9mZCddO1xuICAgICAgICBmZE9ialsnamF2YS9pby9GaWxlRGVzY3JpcHRvci9mZCddID0gZmQ7XG4gICAgICAgIGZkT2JqLiRwb3MgPSAwO1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3JlYWQwKClJJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fRmlsZUlucHV0U3RyZWFtKTogdm9pZCB7XG4gICAgdmFyIGZkT2JqID0gamF2YVRoaXNbXCJqYXZhL2lvL0ZpbGVJbnB1dFN0cmVhbS9mZFwiXSxcbiAgICAgIGZkID0gZmRPYmpbXCJqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yL2ZkXCJdO1xuICAgIGlmICgtMSA9PT0gZmQpIHtcbiAgICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbihcIkxqYXZhL2lvL0lPRXhjZXB0aW9uO1wiLCBcIkJhZCBmaWxlIGRlc2NyaXB0b3JcIik7XG4gICAgfSBlbHNlIGlmICgwICE9PSBmZCkge1xuICAgICAgLy8gdGhpcyBpcyBhIHJlYWwgZmlsZSB0aGF0IHdlJ3ZlIGFscmVhZHkgb3BlbmVkXG4gICAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICAgIHZhciBidWYgPSBuZXcgQnVmZmVyKDEpO1xuICAgICAgZnMucmVhZChmZCwgYnVmLCAwLCAxLCBmZE9iai4kcG9zLCAoZXJyLCBieXRlc19yZWFkKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGZkT2JqLiRwb3MrKztcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKDAgPT09IGJ5dGVzX3JlYWQgPyAtMSA6IGJ1Zi5yZWFkVUludDgoMCkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlYWRpbmcgZnJvbSBTeXN0ZW0uaW4sIGRvIGl0IGFzeW5jXG4gICAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICAgIGFzeW5jX2lucHV0KDEsIChieXRlOiBOb2RlQnVmZmVyKSA9PiB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigwID09PSBieXRlLmxlbmd0aCA/IC0xIDogYnl0ZS5yZWFkVUludDgoMCkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyAncmVhZEJ5dGVzKFtCSUkpSScodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGVJbnB1dFN0cmVhbSwgYnl0ZUFycjogSlZNVHlwZXMuSlZNQXJyYXk8bnVtYmVyPiwgb2Zmc2V0OiBudW1iZXIsIG5CeXRlczogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB2YXIgYnVmOiBCdWZmZXIsIHBvczogbnVtYmVyLFxuICAgICAgZmRPYmogPSBqYXZhVGhpc1tcImphdmEvaW8vRmlsZUlucHV0U3RyZWFtL2ZkXCJdLFxuICAgICAgZmQgPSBmZE9ialtcImphdmEvaW8vRmlsZURlc2NyaXB0b3IvZmRcIl07XG5cbiAgICBpZiAob2Zmc2V0ICsgbkJ5dGVzID4gYnl0ZUFyci5hcnJheS5sZW5ndGgpIHtcbiAgICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9JbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOycsIFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChuQnl0ZXMgPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAoLTEgPT09IGZkKSB7XG4gICAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oXCJMamF2YS9pby9JT0V4Y2VwdGlvbjtcIiwgXCJCYWQgZmlsZSBkZXNjcmlwdG9yXCIpO1xuICAgIH0gZWxzZSBpZiAoMCAhPT0gZmQpIHtcbiAgICAgIC8vIHRoaXMgaXMgYSByZWFsIGZpbGUgdGhhdCB3ZSd2ZSBhbHJlYWR5IG9wZW5lZFxuICAgICAgcG9zID0gZmRPYmouJHBvcztcbiAgICAgIGJ1ZiA9IG5ldyBCdWZmZXIobkJ5dGVzKTtcbiAgICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgICAgZnMucmVhZChmZCwgYnVmLCAwLCBuQnl0ZXMsIHBvcywgKGVyciwgYnl0ZXNSZWFkKSA9PiB7XG4gICAgICAgIGlmIChudWxsICE9IGVycikge1xuICAgICAgICAgIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub3QgY2xlYXIgd2h5LCBidXQgc29tZXRpbWVzIG5vZGUgZG9lc24ndCBtb3ZlIHRoZVxuICAgICAgICAgIC8vIGZpbGUgcG9pbnRlciwgc28gd2UgZG8gaXQgaGVyZSBvdXJzZWx2ZXMuXG4gICAgICAgICAgZmRPYmouJHBvcyArPSBieXRlc1JlYWQ7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlc1JlYWQ7IGkrKykge1xuICAgICAgICAgICAgYnl0ZUFyci5hcnJheVtvZmZzZXQgKyBpXSA9IGJ1Zi5yZWFkSW50OChpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKDAgPT09IGJ5dGVzUmVhZCA/IC0xIDogYnl0ZXNSZWFkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlYWRpbmcgZnJvbSBTeXN0ZW0uaW4sIGRvIGl0IGFzeW5jXG4gICAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICAgIGFzeW5jX2lucHV0KG5CeXRlcywgKGJ5dGVzOiBOb2RlQnVmZmVyKSA9PiB7XG4gICAgICAgIHZhciBiOiBudW1iZXIsIGlkeDogbnVtYmVyO1xuICAgICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGJ5dGVzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICBiID0gYnl0ZXMucmVhZFVJbnQ4KGlkeCk7XG4gICAgICAgICAgYnl0ZUFyci5hcnJheVtvZmZzZXQgKyBpZHhdID0gYjtcbiAgICAgICAgfVxuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oYnl0ZXMubGVuZ3RoID09PSAwID8gLTEgOiBieXRlcy5sZW5ndGgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnc2tpcChKKUonKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19GaWxlSW5wdXRTdHJlYW0sIG5CeXRlczogTG9uZyk6IHZvaWQge1xuICAgIHZhciBmZE9iaiA9IGphdmFUaGlzW1wiamF2YS9pby9GaWxlSW5wdXRTdHJlYW0vZmRcIl07XG4gICAgdmFyIGZkID0gZmRPYmpbXCJqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yL2ZkXCJdO1xuICAgIGlmICgtMSA9PT0gZmQpIHtcbiAgICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbihcIkxqYXZhL2lvL0lPRXhjZXB0aW9uO1wiLCBcIkJhZCBmaWxlIGRlc2NyaXB0b3JcIik7XG4gICAgfSBlbHNlIGlmICgwICE9PSBmZCkge1xuICAgICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgICBmcy5mc3RhdChmZCwgKGVyciwgc3RhdHMpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJ5dGVzTGVmdCA9IHN0YXRzLnNpemUgLSBmZE9iai4kcG9zLFxuICAgICAgICAgIHRvU2tpcCA9IE1hdGgubWluKG5CeXRlcy50b051bWJlcigpLCBieXRlc0xlZnQpO1xuICAgICAgICBmZE9iai4kcG9zICs9IHRvU2tpcDtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKExvbmcuZnJvbU51bWJlcih0b1NraXApLCBudWxsKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZWFkaW5nIGZyb20gU3lzdGVtLmluLCBkbyBpdCBhc3luY1xuICAgICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgICBhc3luY19pbnB1dChuQnl0ZXMudG9OdW1iZXIoKSwgKGJ5dGVzKSA9PiB7XG4gICAgICAgIC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgd2hhdCB0aGUgaW5wdXQgYWN0dWFsbHkgd2FzXG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybihMb25nLmZyb21OdW1iZXIoYnl0ZXMubGVuZ3RoKSwgbnVsbCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdhdmFpbGFibGUoKUknKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19GaWxlSW5wdXRTdHJlYW0pOiBudW1iZXIge1xuICAgIHZhciBmZE9iaiA9IGphdmFUaGlzW1wiamF2YS9pby9GaWxlSW5wdXRTdHJlYW0vZmRcIl0sXG4gICAgICBmZCA9IGZkT2JqW1wiamF2YS9pby9GaWxlRGVzY3JpcHRvci9mZFwiXTtcblxuICAgIGlmIChmZCA9PT0gLTEpIHtcbiAgICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbihcIkxqYXZhL2lvL0lPRXhjZXB0aW9uO1wiLCBcIkJhZCBmaWxlIGRlc2NyaXB0b3JcIik7XG4gICAgfSBlbHNlIGlmIChmZCA9PT0gMCkge1xuICAgICAgLy8gbm8gYnVmZmVyaW5nIGZvciBzdGRpbiAoaWYgZmQgaXMgMClcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICAgIGZzLmZzdGF0KGZkLCAoZXJyLCBzdGF0cykgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oc3RhdHMuc2l6ZSAtIGZkT2JqLiRwb3MpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnaW5pdElEcygpVicodGhyZWFkOiBKVk1UaHJlYWQpOiB2b2lkIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnY2xvc2UwKClWJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fRmlsZUlucHV0U3RyZWFtKTogdm9pZCB7XG4gICAgdmFyIGZkT2JqID0gamF2YVRoaXNbJ2phdmEvaW8vRmlsZUlucHV0U3RyZWFtL2ZkJ10sXG4gICAgICBmZCA9IGZkT2JqWydqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yL2ZkJ107XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMuY2xvc2UoZmQsIChlcnI/OiBOb2RlSlMuRXJybm9FeGNlcHRpb24pID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmRPYmpbJ2phdmEvaW8vRmlsZURlc2NyaXB0b3IvZmQnXSA9IC0xO1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59XG5cbmNsYXNzIGphdmFfaW9fRmlsZU91dHB1dFN0cmVhbSB7XG4gIC8qKlxuICAgKiBPcGVucyBhIGZpbGUsIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLCBmb3Igb3ZlcndyaXRpbmcgb3IgYXBwZW5kaW5nLlxuICAgKiBAcGFyYW0gbmFtZSBuYW1lIG9mIGZpbGUgdG8gYmUgb3BlbmVkXG4gICAqIEBwYXJhbSBhcHBlbmQgd2hldGhlciB0aGUgZmlsZSBpcyB0byBiZSBvcGVuZWQgaW4gYXBwZW5kIG1vZGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgJ29wZW4wKExqYXZhL2xhbmcvU3RyaW5nO1opVicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGVPdXRwdXRTdHJlYW0sIG5hbWU6IEpWTVR5cGVzLmphdmFfbGFuZ19TdHJpbmcsIGFwcGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMub3BlbihuYW1lLnRvU3RyaW5nKCksIGFwcGVuZCA/ICdhJyA6ICd3JywgKGVyciwgZmQpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH1cbiAgICAgIHZhciBmZE9iaiA9IGphdmFUaGlzWydqYXZhL2lvL0ZpbGVPdXRwdXRTdHJlYW0vZmQnXTtcbiAgICAgIGZkT2JqWydqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yL2ZkJ10gPSBmZDtcbiAgICAgIGZzLmZzdGF0KGZkLCAoZXJyLCBzdGF0cykgPT4ge1xuICAgICAgICBmZE9iai4kcG9zID0gc3RhdHMuc2l6ZTtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgdGhlIHNwZWNpZmllZCBieXRlIHRvIHRoaXMgZmlsZSBvdXRwdXQgc3RyZWFtLlxuICAgKlxuICAgKiBAcGFyYW0gICBiICAgdGhlIGJ5dGUgdG8gYmUgd3JpdHRlbi5cbiAgICogQHBhcmFtICAgYXBwZW5kICAge0Bjb2RlIHRydWV9IGlmIHRoZSB3cml0ZSBvcGVyYXRpb24gZmlyc3RcbiAgICogICAgIGFkdmFuY2VzIHRoZSBwb3NpdGlvbiB0byB0aGUgZW5kIG9mIGZpbGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgJ3dyaXRlKElaKVYnKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19GaWxlT3V0cHV0U3RyZWFtLCBiOiBudW1iZXIsIGFwcGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gSEFDSzogQXZvaWQgcmVpbXBsZW1lbnRpbmcgYmVsb3cgZm9yIHNpbmdsZSBieXRlIGNhc2UuXG4gICAgamF2YV9pb19GaWxlT3V0cHV0U3RyZWFtWyd3cml0ZUJ5dGVzKFtCSUlaKVYnXSh0aHJlYWQsIGphdmFUaGlzLCA8YW55PiB7YXJyYXk6IFtiXX0sIDAsIDEsIGFwcGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIGEgc3ViIGFycmF5IGFzIGEgc2VxdWVuY2Ugb2YgYnl0ZXMuXG4gICAqIEBwYXJhbSBiIHRoZSBkYXRhIHRvIGJlIHdyaXR0ZW5cbiAgICogQHBhcmFtIG9mZiB0aGUgc3RhcnQgb2Zmc2V0IGluIHRoZSBkYXRhXG4gICAqIEBwYXJhbSBsZW4gdGhlIG51bWJlciBvZiBieXRlcyB0aGF0IGFyZSB3cml0dGVuXG4gICAqIEBwYXJhbSBhcHBlbmQge0Bjb2RlIHRydWV9IHRvIGZpcnN0IGFkdmFuY2UgdGhlIHBvc2l0aW9uIHRvIHRoZVxuICAgKiAgICAgZW5kIG9mIGZpbGVcbiAgICogQGV4Y2VwdGlvbiBJT0V4Y2VwdGlvbiBJZiBhbiBJL08gZXJyb3IgaGFzIG9jY3VycmVkLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyAnd3JpdGVCeXRlcyhbQklJWilWJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fRmlsZU91dHB1dFN0cmVhbSwgYnl0ZXM6IEpWTVR5cGVzLkpWTUFycmF5PG51bWJlcj4sIG9mZnNldDogbnVtYmVyLCBsZW46IG51bWJlciwgYXBwZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB2YXIgYnVmOiBCdWZmZXIgPSBuZXcgQnVmZmVyKGJ5dGVzLmFycmF5KSxcbiAgICAgIGZkT2JqID0gamF2YVRoaXNbJ2phdmEvaW8vRmlsZU91dHB1dFN0cmVhbS9mZCddLFxuICAgICAgZmQgPSBmZE9ialsnamF2YS9pby9GaWxlRGVzY3JpcHRvci9mZCddO1xuICAgIGlmIChmZCA9PT0gLTEpIHtcbiAgICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvaW8vSU9FeGNlcHRpb247JywgXCJCYWQgZmlsZSBkZXNjcmlwdG9yXCIpO1xuICAgIH0gZWxzZSBpZiAoZmQgIT09IDEgJiYgZmQgIT09IDIpIHtcbiAgICAgIC8vIG5vcm1hbCBmaWxlXG4gICAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICAgIGZzLndyaXRlKGZkLCBidWYsIG9mZnNldCwgbGVuLCBmZE9iai4kcG9zLCAoZXJyLCBudW1CeXRlcykgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBmZE9iai4kcG9zICs9IG51bUJ5dGVzO1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgc3RyaW5nIGlzIGluIFVURi04IGZvcm1hdC4gQnV0IG5vdyB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlbSB0byBVVEYtMTYgdG8gcHJpbnQgJ2VtIG91dC4gOihcbiAgICAgIHZhciBvdXRwdXQ6IHN0cmluZyA9IGJ1Zi50b1N0cmluZyhcInV0ZjhcIiwgb2Zmc2V0LCBvZmZzZXQgKyBsZW4pO1xuICAgICAgaWYgKGZkID09PSAxKSB7XG4gICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKG91dHB1dCk7XG4gICAgICB9IGVsc2UgaWYgKGZkID09PSAyKSB7XG4gICAgICAgIHByb2Nlc3Muc3RkZXJyLndyaXRlKG91dHB1dCk7XG4gICAgICB9XG4gICAgICAvLyBGb3IgdGhlIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gLS0gdGhlIERPTSBkb2Vzbid0IGdldCByZXBhaW50ZWRcbiAgICAgIC8vIHVubGVzcyB3ZSBnaXZlIHRoZSBldmVudCBsb29wIGEgY2hhbmNlIHRvIHNwaW4uXG4gICAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICAgIHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnY2xvc2UwKClWJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fRmlsZU91dHB1dFN0cmVhbSk6IHZvaWQge1xuICAgIHZhciBmZE9iaiA9IGphdmFUaGlzWydqYXZhL2lvL0ZpbGVPdXRwdXRTdHJlYW0vZmQnXSxcbiAgICAgIGZkID0gZmRPYmpbJ2phdmEvaW8vRmlsZURlc2NyaXB0b3IvZmQnXTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5jbG9zZShmZCwgKGVycj86IE5vZGVKUy5FcnJub0V4Y2VwdGlvbikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmRPYmpbJ2phdmEvaW8vRmlsZURlc2NyaXB0b3IvZmQnXSA9IC0xO1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2luaXRJRHMoKVYnKHRocmVhZDogSlZNVGhyZWFkKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG59XG5cbmNsYXNzIGphdmFfaW9fT2JqZWN0SW5wdXRTdHJlYW0ge1xuXG4gIHB1YmxpYyBzdGF0aWMgJ2J5dGVzVG9GbG9hdHMoW0JJW0ZJSSlWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogSlZNVHlwZXMuSlZNQXJyYXk8bnVtYmVyPiwgYXJnMTogbnVtYmVyLCBhcmcyOiBKVk1UeXBlcy5KVk1BcnJheTxudW1iZXI+LCBhcmczOiBudW1iZXIsIGFyZzQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdieXRlc1RvRG91YmxlcyhbQklbRElJKVYnKHRocmVhZDogSlZNVGhyZWFkLCBhcmcwOiBKVk1UeXBlcy5KVk1BcnJheTxudW1iZXI+LCBhcmcxOiBudW1iZXIsIGFyZzI6IEpWTVR5cGVzLkpWTUFycmF5PG51bWJlcj4sIGFyZzM6IG51bWJlciwgYXJnNDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG59XG5cbmNsYXNzIGphdmFfaW9fT2JqZWN0T3V0cHV0U3RyZWFtIHtcblxuICBwdWJsaWMgc3RhdGljICdmbG9hdHNUb0J5dGVzKFtGSVtCSUkpVicodGhyZWFkOiBKVk1UaHJlYWQsIGFyZzA6IEpWTVR5cGVzLkpWTUFycmF5PG51bWJlcj4sIGFyZzE6IG51bWJlciwgYXJnMjogSlZNVHlwZXMuSlZNQXJyYXk8bnVtYmVyPiwgYXJnMzogbnVtYmVyLCBhcmc0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZG91Ymxlc1RvQnl0ZXMoW0RJW0JJSSlWJyh0aHJlYWQ6IEpWTVRocmVhZCwgYXJnMDogSlZNVHlwZXMuSlZNQXJyYXk8bnVtYmVyPiwgYXJnMTogbnVtYmVyLCBhcmcyOiBKVk1UeXBlcy5KVk1BcnJheTxudW1iZXI+LCBhcmczOiBudW1iZXIsIGFyZzQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxufVxuXG5jbGFzcyBqYXZhX2lvX09iamVjdFN0cmVhbUNsYXNzIHtcblxuICBwdWJsaWMgc3RhdGljICdpbml0TmF0aXZlKClWJyh0aHJlYWQ6IEpWTVRocmVhZCk6IHZvaWQge1xuICAgIC8vIE5PUFxuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnaGFzU3RhdGljSW5pdGlhbGl6ZXIoTGphdmEvbGFuZy9DbGFzczspWicodGhyZWFkOiBKVk1UaHJlYWQsIGpjbzogSlZNVHlwZXMuamF2YV9sYW5nX0NsYXNzKTogYm9vbGVhbiB7XG4gICAgLy8gY2hlY2sgaWYgY2xzIGhhcyBhIDxjbGluaXQ+IG1ldGhvZFxuICAgIHJldHVybiBqY28uJGNscy5nZXRNZXRob2QoJzxjbGluaXQ+KClWJykgIT09IG51bGw7XG4gIH1cblxufVxuXG5jbGFzcyBqYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUge1xuXG4gIHB1YmxpYyBzdGF0aWMgJ29wZW4wKExqYXZhL2xhbmcvU3RyaW5nO0kpVicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUsIGZpbGVuYW1lOiBKVk1UeXBlcy5qYXZhX2xhbmdfU3RyaW5nLCBtb2RlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB2YXIgZmlsZXBhdGggPSBmaWxlbmFtZS50b1N0cmluZygpLFxuICAgICAgcmFmU3RhdGljcyA9IDx0eXBlb2YgSlZNVHlwZXMuamF2YV9pb19SYW5kb21BY2Nlc3NGaWxlPiAoPFJlZmVyZW5jZUNsYXNzRGF0YTxKVk1UeXBlcy5qYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGU+PiBqYXZhVGhpcy5nZXRDbGFzcygpKS5nZXRDb25zdHJ1Y3Rvcih0aHJlYWQpLFxuICAgICAgbW9kZVN0cjogc3RyaW5nO1xuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSByYWZTdGF0aWNzW1wiamF2YS9pby9SYW5kb21BY2Nlc3NGaWxlL09fUkRPTkxZXCJdOlxuICAgICAgICBtb2RlU3RyID0gJ3InO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgcmFmU3RhdGljc1tcImphdmEvaW8vUmFuZG9tQWNjZXNzRmlsZS9PX1JEV1JcIl06XG4gICAgICAgIG1vZGVTdHIgPSAncisnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgcmFmU3RhdGljc1tcImphdmEvaW8vUmFuZG9tQWNjZXNzRmlsZS9PX1NZTkNcIl06XG4gICAgICBjYXNlIHJhZlN0YXRpY3NbXCJqYXZhL2lvL1JhbmRvbUFjY2Vzc0ZpbGUvT19EU1lOQ1wiXTpcbiAgICAgICAgbW9kZVN0ciA9ICdycysnO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgZnMub3BlbihmaWxlcGF0aCwgbW9kZVN0ciwgKGUsIGZkKSA9PiB7XG4gICAgICBpZiAoZSkge1xuICAgICAgICByZXR1cm4gdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmZE9iaiA9IGphdmFUaGlzWydqYXZhL2lvL1JhbmRvbUFjY2Vzc0ZpbGUvZmQnXTtcbiAgICAgICAgZmRPYmpbJ2phdmEvaW8vRmlsZURlc2NyaXB0b3IvZmQnXSA9IGZkO1xuICAgICAgICBmZE9iai4kcG9zID0gMDtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgYSBieXRlIG9mIGRhdGEgZnJvbSB0aGlzIGZpbGUuIFRoZSBieXRlIGlzIHJldHVybmVkIGFzIGFuXG4gICAqIGludGVnZXIgaW4gdGhlIHJhbmdlIDAgdG8gMjU1ICh7QGNvZGUgMHgwMC0weDBmZn0pLiBUaGlzXG4gICAqIG1ldGhvZCBibG9ja3MgaWYgbm8gaW5wdXQgaXMgeWV0IGF2YWlsYWJsZS5cbiAgICogPHA+XG4gICAqIEFsdGhvdWdoIHtAY29kZSBSYW5kb21BY2Nlc3NGaWxlfSBpcyBub3QgYSBzdWJjbGFzcyBvZlxuICAgKiB7QGNvZGUgSW5wdXRTdHJlYW19LCB0aGlzIG1ldGhvZCBiZWhhdmVzIGluIGV4YWN0bHkgdGhlIHNhbWVcbiAgICogd2F5IGFzIHRoZSB7QGxpbmsgSW5wdXRTdHJlYW0jcmVhZCgpfSBtZXRob2Qgb2ZcbiAgICoge0Bjb2RlIElucHV0U3RyZWFtfS5cbiAgICpcbiAgICogQHJldHVybiAgICAgdGhlIG5leHQgYnl0ZSBvZiBkYXRhLCBvciB7QGNvZGUgLTF9IGlmIHRoZSBlbmQgb2YgdGhlXG4gICAqICAgICAgICAgICAgIGZpbGUgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICogQGV4Y2VwdGlvbiAgSU9FeGNlcHRpb24gIGlmIGFuIEkvTyBlcnJvciBvY2N1cnMuIE5vdCB0aHJvd24gaWZcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIGVuZC1vZi1maWxlIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljICdyZWFkMCgpSScodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUpOiB2b2lkIHtcbiAgICB2YXIgZmRPYmogPSBqYXZhVGhpc1tcImphdmEvaW8vUmFuZG9tQWNjZXNzRmlsZS9mZFwiXSxcbiAgICAgIGZkID0gZmRPYmpbXCJqYXZhL2lvL0ZpbGVEZXNjcmlwdG9yL2ZkXCJdLFxuICAgICAgYnVmID0gbmV3IEJ1ZmZlcigxKTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5yZWFkKGZkLCBidWYsIDAsIDEsIGZkT2JqLiRwb3MsIGZ1bmN0aW9uIChlcnIsIGJ5dGVzUmVhZCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmRPYmouJHBvcyArPSBieXRlc1JlYWQ7XG4gICAgICAgIC8vIFJlYWQgYXMgdWludCwgc2luY2UgcmV0dXJuIHZhbHVlIGlzIHVuc2lnbmVkLlxuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oYnl0ZXNSZWFkID09PSAwID8gLTEgOiBidWYucmVhZFVJbnQ4KDApKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3JlYWRCeXRlcyhbQklJKUknKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19SYW5kb21BY2Nlc3NGaWxlLCBieXRlX2FycjogSlZNVHlwZXMuSlZNQXJyYXk8bnVtYmVyPiwgb2Zmc2V0OiBudW1iZXIsIGxlbjogbnVtYmVyKTogdm9pZCB7XG4gICAgdmFyIGZkT2JqID0gamF2YVRoaXNbXCJqYXZhL2lvL1JhbmRvbUFjY2Vzc0ZpbGUvZmRcIl0sXG4gICAgICBmZCA9IGZkT2JqW1wiamF2YS9pby9GaWxlRGVzY3JpcHRvci9mZFwiXSxcbiAgICAgIGJ1ZiA9IG5ldyBCdWZmZXIobGVuKTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5yZWFkKGZkLCBidWYsIDAsIGxlbiwgZmRPYmouJHBvcywgZnVuY3Rpb24gKGVyciwgYnl0ZXNSZWFkKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiB0aHJvd05vZGVFcnJvcih0aHJlYWQsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzUmVhZDsgaSsrKSB7XG4gICAgICAgICAgYnl0ZV9hcnIuYXJyYXlbb2Zmc2V0ICsgaV0gPSBidWYucmVhZEludDgoaSk7XG4gICAgICAgIH1cbiAgICAgICAgZmRPYmouJHBvcyArPSBieXRlc1JlYWQ7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigwID09PSBieXRlc1JlYWQgJiYgMCAhPT0gbGVuID8gLTEgOiBieXRlc1JlYWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnd3JpdGUwKEkpVicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUsIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgZmRPYmogPSBqYXZhVGhpc1tcImphdmEvaW8vUmFuZG9tQWNjZXNzRmlsZS9mZFwiXTtcbiAgICBsZXQgZmQgPSBmZE9ialtcImphdmEvaW8vRmlsZURlc2NyaXB0b3IvZmRcIl07XG4gICAgbGV0IGRhdGEgPSBuZXcgQnVmZmVyKDEpO1xuICAgIGRhdGEud3JpdGVJbnQ4KHZhbHVlLCAwKTtcblxuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLndyaXRlKGZkLCBkYXRhLCAwLCAxLCBmZE9iai4kcG9zLCAoZXJyLCBudW1CeXRlcykgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBmZE9iai4kcG9zICs9IG51bUJ5dGVzO1xuICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICd3cml0ZUJ5dGVzKFtCSUkpVicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUsIGJ5dGVBcnI6IEpWTVR5cGVzLkpWTUFycmF5PG51bWJlcj4sIG9mZnNldDogbnVtYmVyLCBsZW46IG51bWJlcik6IHZvaWQge1xuICAgIHZhciBmZE9iaiA9IGphdmFUaGlzW1wiamF2YS9pby9SYW5kb21BY2Nlc3NGaWxlL2ZkXCJdLFxuICAgICAgZmQgPSBmZE9ialtcImphdmEvaW8vRmlsZURlc2NyaXB0b3IvZmRcIl0sXG4gICAgICBidWYgPSBuZXcgQnVmZmVyKGJ5dGVBcnIuYXJyYXkpO1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLndyaXRlKGZkLCBidWYsIG9mZnNldCwgbGVuLCBmZE9iai4kcG9zLCAoZXJyLCBudW1CeXRlcykgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfVxuICAgICAgZmRPYmouJHBvcyArPSBudW1CeXRlcztcbiAgICAgIHRocmVhZC5hc3luY1JldHVybigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZ2V0RmlsZVBvaW50ZXIoKUonKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19SYW5kb21BY2Nlc3NGaWxlKTogTG9uZyB7XG4gICAgcmV0dXJuIExvbmcuZnJvbU51bWJlcihqYXZhVGhpc1snamF2YS9pby9SYW5kb21BY2Nlc3NGaWxlL2ZkJ10uJHBvcyk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdzZWVrMChKKVYnKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19SYW5kb21BY2Nlc3NGaWxlLCBwb3M6IExvbmcpOiB2b2lkIHtcbiAgICBqYXZhVGhpc1snamF2YS9pby9SYW5kb21BY2Nlc3NGaWxlL2ZkJ10uJHBvcyA9IHBvcy50b051bWJlcigpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnbGVuZ3RoKClKJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fUmFuZG9tQWNjZXNzRmlsZSk6IHZvaWQge1xuICAgIHZhciBmZE9iaiA9IGphdmFUaGlzWydqYXZhL2lvL1JhbmRvbUFjY2Vzc0ZpbGUvZmQnXSxcbiAgICAgIGZkID0gZmRPYmpbJ2phdmEvaW8vRmlsZURlc2NyaXB0b3IvZmQnXTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5mc3RhdChmZCwgKGVyciwgc3RhdHMpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHRocm93Tm9kZUVycm9yKHRocmVhZCwgZXJyKTtcbiAgICAgIH1cbiAgICAgIHRocmVhZC5hc3luY1JldHVybihMb25nLmZyb21OdW1iZXIoc3RhdHMuc2l6ZSksIG51bGwpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnc2V0TGVuZ3RoKEopVicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUsIGFyZzA6IExvbmcpOiB2b2lkIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnaW5pdElEcygpVicodGhyZWFkOiBKVk1UaHJlYWQpOiB2b2lkIHtcbiAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2xhbmcvVW5zYXRpc2ZpZWRMaW5rRXJyb3I7JywgJ05hdGl2ZSBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnY2xvc2UwKClWJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fUmFuZG9tQWNjZXNzRmlsZSk6IHZvaWQge1xuICAgIHZhciBmZE9iaiA9IGphdmFUaGlzWydqYXZhL2lvL1JhbmRvbUFjY2Vzc0ZpbGUvZmQnXSxcbiAgICAgIGZkID0gZmRPYmpbJ2phdmEvaW8vRmlsZURlc2NyaXB0b3IvZmQnXTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5jbG9zZShmZCwgKGVycj86IE5vZGVKUy5FcnJub0V4Y2VwdGlvbikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gdGhyb3dOb2RlRXJyb3IodGhyZWFkLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmRPYmpbJ2phdmEvaW8vRmlsZURlc2NyaXB0b3IvZmQnXSA9IC0xO1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59XG5cbmNsYXNzIGphdmFfaW9fVW5peEZpbGVTeXN0ZW0ge1xuXG4gIHB1YmxpYyBzdGF0aWMgJ2Nhbm9uaWNhbGl6ZTAoTGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL2xhbmcvU3RyaW5nOycodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1VuaXhGaWxlU3lzdGVtLCBqdm1QYXRoU3RyOiBKVk1UeXBlcy5qYXZhX2xhbmdfU3RyaW5nKTogSlZNVHlwZXMuamF2YV9sYW5nX1N0cmluZyB7XG4gICAgdmFyIGpzU3RyID0ganZtUGF0aFN0ci50b1N0cmluZygpO1xuICAgIHJldHVybiB1dGlsLmluaXRTdHJpbmcodGhyZWFkLmdldEJzQ2woKSwgcGF0aC5yZXNvbHZlKHBhdGgubm9ybWFsaXplKGpzU3RyKSkpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZ2V0Qm9vbGVhbkF0dHJpYnV0ZXMwKExqYXZhL2lvL0ZpbGU7KUknKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19Vbml4RmlsZVN5c3RlbSwgZmlsZTogSlZNVHlwZXMuamF2YV9pb19GaWxlKTogdm9pZCB7XG4gICAgdmFyIGZpbGVwYXRoID0gZmlsZVsnamF2YS9pby9GaWxlL3BhdGgnXSxcbiAgICAgIGZpbGVTeXN0ZW0gPSA8dHlwZW9mIEpWTVR5cGVzLmphdmFfaW9fRmlsZVN5c3RlbT4gKDxSZWZlcmVuY2VDbGFzc0RhdGE8SlZNVHlwZXMuamF2YV9pb19GaWxlU3lzdGVtPj4gdGhyZWFkLmdldEJzQ2woKS5nZXRJbml0aWFsaXplZENsYXNzKHRocmVhZCwgJ0xqYXZhL2lvL0ZpbGVTeXN0ZW07JykpLmdldENvbnN0cnVjdG9yKHRocmVhZCk7XG5cbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBzdGF0RmlsZShmaWxlcGF0aC50b1N0cmluZygpLCAoc3RhdHMpID0+IHtcbiAgICAgIC8vIFJldHVybnMgMCBpZiBmaWxlIGRvZXMgbm90IGV4aXN0LCBvciBhbnkgb3RoZXIgZXJyb3Igb2NjdXJzLlxuICAgICAgdmFyIHJ2OiBudW1iZXIgPSAwO1xuICAgICAgaWYgKHN0YXRzICE9PSBudWxsKSB7XG4gICAgICAgIHJ2IHw9IGZpbGVTeXN0ZW1bJ2phdmEvaW8vRmlsZVN5c3RlbS9CQV9FWElTVFMnXTtcbiAgICAgICAgaWYgKHN0YXRzLmlzRmlsZSgpKSB7XG4gICAgICAgICAgcnYgfD0gZmlsZVN5c3RlbVsnamF2YS9pby9GaWxlU3lzdGVtL0JBX1JFR1VMQVInXTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0cy5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgICAgcnYgfD0gZmlsZVN5c3RlbVsnamF2YS9pby9GaWxlU3lzdGVtL0JBX0RJUkVDVE9SWSddO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJlYWQuYXN5bmNSZXR1cm4ocnYpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnY2hlY2tBY2Nlc3MoTGphdmEvaW8vRmlsZTtJKVonKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19Vbml4RmlsZVN5c3RlbSwgZmlsZTogSlZNVHlwZXMuamF2YV9pb19GaWxlLCBhY2Nlc3M6IG51bWJlcik6IHZvaWQge1xuICAgIHZhciBmaWxlcGF0aCA9IGZpbGVbJ2phdmEvaW8vRmlsZS9wYXRoJ107XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgc3RhdEZpbGUoZmlsZXBhdGgudG9TdHJpbmcoKSwgKHN0YXRzKSA9PiB7XG4gICAgICBpZiAoc3RhdHMgPT0gbnVsbCkge1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBYWFg6IEFzc3VtaW5nIHdlJ3JlIG93bmVyL2dyb3VwL290aGVyLiA6KVxuICAgICAgICAvLyBTaGlmdCBhY2Nlc3Mgc28gaXQncyBwcmVzZW50IGluIG93bmVyL2dyb3VwL290aGVyLlxuICAgICAgICAvLyBUaGVuLCBBTkQgd2l0aCB0aGUgYWN0dWFsIG1vZGUsIGFuZCBjaGVjayBpZiB0aGUgcmVzdWx0IGlzIGFib3ZlIDAuXG4gICAgICAgIC8vIFRoYXQgaW5kaWNhdGVzIHRoYXQgdGhlIGFjY2VzcyBiaXQgd2UncmUgbG9va2luZyBmb3Igd2FzIHNldCBvblxuICAgICAgICAvLyBvbmUgb2Ygb3duZXIvZ3JvdXAvb3RoZXIuXG4gICAgICAgIHZhciBtYXNrID0gYWNjZXNzIHwgKGFjY2VzcyA8PCAzKSB8IChhY2Nlc3MgPDwgNik7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigoc3RhdHMubW9kZSAmIG1hc2spID4gMCA/IDEgOiAwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2dldExhc3RNb2RpZmllZFRpbWUoTGphdmEvaW8vRmlsZTspSicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1VuaXhGaWxlU3lzdGVtLCBmaWxlOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGUpOiB2b2lkIHtcbiAgICB2YXIgZmlsZXBhdGggPSBmaWxlWydqYXZhL2lvL0ZpbGUvcGF0aCddO1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIHN0YXRGaWxlKGZpbGVwYXRoLnRvU3RyaW5nKCksIGZ1bmN0aW9uIChzdGF0cykge1xuICAgICAgaWYgKHN0YXRzID09IG51bGwpIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKExvbmcuWkVSTywgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oTG9uZy5mcm9tTnVtYmVyKHN0YXRzLm10aW1lLmdldFRpbWUoKSksIG51bGwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnZ2V0TGVuZ3RoKExqYXZhL2lvL0ZpbGU7KUonKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19Vbml4RmlsZVN5c3RlbSwgZmlsZTogSlZNVHlwZXMuamF2YV9pb19GaWxlKTogdm9pZCB7XG4gICAgdmFyIGZpbGVwYXRoID0gZmlsZVsnamF2YS9pby9GaWxlL3BhdGgnXTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5zdGF0KGZpbGVwYXRoLnRvU3RyaW5nKCksIChlcnIsIHN0YXQpID0+IHtcbiAgICAgIHRocmVhZC5hc3luY1JldHVybihlcnIgIT0gbnVsbCA/IExvbmcuWkVSTyA6IExvbmcuZnJvbU51bWJlcihzdGF0LnNpemUpLCBudWxsKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3NldFBlcm1pc3Npb24oTGphdmEvaW8vRmlsZTtJWlopWicodGhyZWFkOiBKVk1UaHJlYWQsIGphdmFUaGlzOiBKVk1UeXBlcy5qYXZhX2lvX1VuaXhGaWxlU3lzdGVtLCBmaWxlOiBKVk1UeXBlcy5qYXZhX2lvX0ZpbGUsIGFjY2VzczogbnVtYmVyLCBlbmFibGU6IG51bWJlciwgb3duZXJvbmx5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBBY2Nlc3MgaXMgZXF1YWwgdG8gb25lIG9mIHRoZSBmb2xsb3dpbmcgc3RhdGljIGZpZWxkczpcbiAgICAvLyAqIEZpbGVTeXN0ZW0uQUNDRVNTX1JFQUQgKDB4MDQpXG4gICAgLy8gKiBGaWxlU3lzdGVtLkFDQ0VTU19XUklURSAoMHgwMilcbiAgICAvLyAqIEZpbGVTeXN0ZW0uQUNDRVNTX0VYRUNVVEUgKDB4MDEpXG4gICAgLy8gVGhlc2UgYXJlIGNvbnZlbmllbnRseSBpZGVudGljYWwgdG8gdGhlaXIgVW5peCBlcXVpdmFsZW50cywgd2hpY2hcbiAgICAvLyB3ZSBoYXZlIHRvIGNvbnZlcnQgdG8gZm9yIE5vZGUuXG4gICAgLy8gWFhYOiBDdXJyZW50bHkgYXNzdW1pbmcgdGhhdCB0aGUgYWJvdmUgYXNzdW1wdGlvbiBob2xkcyBhY3Jvc3MgSkNMcy5cbiAgICB2YXIgZmlsZXBhdGggPSBmaWxlWydqYXZhL2lvL0ZpbGUvcGF0aCddLnRvU3RyaW5nKCk7XG4gICAgaWYgKG93bmVyb25seSkge1xuICAgICAgLy8gU2hpZnQgaXQgNiBiaXRzIG92ZXIgaW50byB0aGUgJ293bmVyJyByZWdpb24gb2YgdGhlIGFjY2VzcyBtb2RlLlxuICAgICAgYWNjZXNzIDw8PSA2O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDbG9uZSBpdCBpbnRvIHRoZSAnb3duZXInIGFuZCAnZ3JvdXAnIHJlZ2lvbnMuXG4gICAgICBhY2Nlc3MgfD0gKGFjY2VzcyA8PCA2KSB8IChhY2Nlc3MgPDwgMyk7XG4gICAgfVxuICAgIGlmICghZW5hYmxlKSB7XG4gICAgICAvLyBEbyBhbiBpbnZlcnQgYW5kIHdlJ2xsIEFORCByYXRoZXIgdGhhbiBPUi5cbiAgICAgIGFjY2VzcyA9IH5hY2Nlc3M7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBvbiBmYWlsdXJlLlxuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIC8vIEZldGNoIGV4aXN0aW5nIHBlcm1pc3Npb25zIG9uIGZpbGUuXG4gICAgc3RhdEZpbGUoZmlsZXBhdGgsIChzdGF0czogZnMuU3RhdHMpID0+IHtcbiAgICAgIGlmIChzdGF0cyA9PSBudWxsKSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBleGlzdGluZ19hY2Nlc3MgPSBzdGF0cy5tb2RlO1xuICAgICAgICAvLyBBcHBseSBtYXNrLlxuICAgICAgICBhY2Nlc3MgPSBlbmFibGUgPyBleGlzdGluZ19hY2Nlc3MgfCBhY2Nlc3MgOiBleGlzdGluZ19hY2Nlc3MgJiBhY2Nlc3M7XG4gICAgICAgIC8vIFNldCBuZXcgcGVybWlzc2lvbnMuXG4gICAgICAgIGZzLmNobW9kKGZpbGVwYXRoLCBhY2Nlc3MsIChlcnI/OiBOb2RlSlMuRXJybm9FeGNlcHRpb24pID0+IHtcbiAgICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oZXJyICE9IG51bGwgPyAwIDogMSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnY3JlYXRlRmlsZUV4Y2x1c2l2ZWx5KExqYXZhL2xhbmcvU3RyaW5nOylaJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fVW5peEZpbGVTeXN0ZW0sIHBhdGg6IEpWTVR5cGVzLmphdmFfbGFuZ19TdHJpbmcpOiB2b2lkIHtcbiAgICB2YXIgZmlsZXBhdGggPSBwYXRoLnRvU3RyaW5nKCk7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgc3RhdEZpbGUoZmlsZXBhdGgsIChzdGF0KSA9PiB7XG4gICAgICBpZiAoc3RhdCAhPSBudWxsKSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZzLm9wZW4oZmlsZXBhdGgsICd3JywgKGVyciwgZmQpID0+IHtcbiAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvaW8vSU9FeGNlcHRpb247JywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcy5jbG9zZShmZCwgKGVycj86IE5vZGVKUy5FcnJub0V4Y2VwdGlvbikgPT4ge1xuICAgICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJlYWQudGhyb3dOZXdFeGNlcHRpb24oJ0xqYXZhL2lvL0lPRXhjZXB0aW9uOycsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdkZWxldGUwKExqYXZhL2lvL0ZpbGU7KVonKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19Vbml4RmlsZVN5c3RlbSwgZmlsZTogSlZNVHlwZXMuamF2YV9pb19GaWxlKTogdm9pZCB7XG4gICAgLy8gRGVsZXRlIHRoZSBmaWxlIG9yIGRpcmVjdG9yeSBkZW5vdGVkIGJ5IHRoZSBnaXZlbiBhYnN0cmFjdFxuICAgIC8vIHBhdGhuYW1lLCByZXR1cm5pbmcgdHJ1ZSBpZiBhbmQgb25seSBpZiB0aGUgb3BlcmF0aW9uIHN1Y2NlZWRzLlxuICAgIC8vIElmIGZpbGUgaXMgYSBkaXJlY3RvcnksIGl0IG11c3QgYmUgZW1wdHkuXG4gICAgdmFyIGZpbGVwYXRoID0gZmlsZVsnamF2YS9pby9GaWxlL3BhdGgnXS50b1N0cmluZygpO1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIHN0YXRGaWxlKGZpbGVwYXRoLCAoc3RhdHMpID0+IHtcbiAgICAgIGlmIChzdGF0cyA9PSBudWxsKSB7XG4gICAgICAgIHRocmVhZC5hc3luY1JldHVybigwKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICBmcy5yZWFkZGlyKGZpbGVwYXRoLCAoZXJyLCBmaWxlcykgPT4ge1xuICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZzLnJtZGlyKGZpbGVwYXRoLCAoZXJyPzogTm9kZUpTLkVycm5vRXhjZXB0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIHRocmVhZC5hc3luY1JldHVybigxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcy51bmxpbmsoZmlsZXBhdGgsIChlcnI/OiBOb2RlSlMuRXJybm9FeGNlcHRpb24pID0+IHtcbiAgICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oMSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAnbGlzdChMamF2YS9pby9GaWxlOylbTGphdmEvbGFuZy9TdHJpbmc7Jyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fVW5peEZpbGVTeXN0ZW0sIGZpbGU6IEpWTVR5cGVzLmphdmFfaW9fRmlsZSk6IHZvaWQge1xuICAgIHZhciBmaWxlcGF0aCA9IGZpbGVbJ2phdmEvaW8vRmlsZS9wYXRoJ10sXG4gICAgICBic0NsID0gdGhyZWFkLmdldEJzQ2woKTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5yZWFkZGlyKGZpbGVwYXRoLnRvU3RyaW5nKCksIChlcnIsIGZpbGVzKSA9PiB7XG4gICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKHV0aWwubmV3QXJyYXlGcm9tRGF0YTxKVk1UeXBlcy5qYXZhX2xhbmdfU3RyaW5nPih0aHJlYWQsIHRocmVhZC5nZXRCc0NsKCksICdbTGphdmEvbGFuZy9TdHJpbmc7JywgZmlsZXMubWFwKChmaWxlOiBzdHJpbmcpID0+IHV0aWwuaW5pdFN0cmluZyh0aHJlYWQuZ2V0QnNDbCgpLCBmaWxlKSkpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2NyZWF0ZURpcmVjdG9yeShMamF2YS9pby9GaWxlOylaJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fVW5peEZpbGVTeXN0ZW0sIGZpbGU6IEpWTVR5cGVzLmphdmFfaW9fRmlsZSk6IHZvaWQge1xuICAgIHZhciBmaWxlcGF0aCA9IGZpbGVbJ2phdmEvaW8vRmlsZS9wYXRoJ10udG9TdHJpbmcoKTtcbiAgICAvLyBBbHJlYWR5IGV4aXN0cy5cbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBzdGF0RmlsZShmaWxlcGF0aCwgKHN0YXQpID0+IHtcbiAgICAgIGlmIChzdGF0ICE9IG51bGwpIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnMubWtkaXIoZmlsZXBhdGgsIChlcnI/OiBOb2RlSlMuRXJybm9FeGNlcHRpb24pID0+IHtcbiAgICAgICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oZXJyICE9IG51bGwgPyAwIDogMSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyAncmVuYW1lMChMamF2YS9pby9GaWxlO0xqYXZhL2lvL0ZpbGU7KVonKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19Vbml4RmlsZVN5c3RlbSwgZmlsZTE6IEpWTVR5cGVzLmphdmFfaW9fRmlsZSwgZmlsZTI6IEpWTVR5cGVzLmphdmFfaW9fRmlsZSk6IHZvaWQge1xuICAgIHZhciBmaWxlMXBhdGggPSBmaWxlMVsnamF2YS9pby9GaWxlL3BhdGgnXS50b1N0cmluZygpLFxuICAgICAgZmlsZTJwYXRoID0gZmlsZTJbJ2phdmEvaW8vRmlsZS9wYXRoJ10udG9TdHJpbmcoKTtcbiAgICB0aHJlYWQuc2V0U3RhdHVzKFRocmVhZFN0YXR1cy5BU1lOQ19XQUlUSU5HKTtcbiAgICBmcy5yZW5hbWUoZmlsZTFwYXRoLCBmaWxlMnBhdGgsIChlcnI/OiBOb2RlSlMuRXJybm9FeGNlcHRpb24pID0+IHtcbiAgICAgIHRocmVhZC5hc3luY1JldHVybihlcnIgIT0gbnVsbCA/IDAgOiAxKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ3NldExhc3RNb2RpZmllZFRpbWUoTGphdmEvaW8vRmlsZTtKKVonKHRocmVhZDogSlZNVGhyZWFkLCBqYXZhVGhpczogSlZNVHlwZXMuamF2YV9pb19Vbml4RmlsZVN5c3RlbSwgZmlsZTogSlZNVHlwZXMuamF2YV9pb19GaWxlLCB0aW1lOiBMb25nKTogdm9pZCB7XG4gICAgdmFyIG10aW1lID0gdGltZS50b051bWJlcigpLFxuICAgICAgYXRpbWUgPSAobmV3IERhdGUpLmdldFRpbWUoKSxcbiAgICAgIGZpbGVwYXRoID0gZmlsZVsnamF2YS9pby9GaWxlL3BhdGgnXS50b1N0cmluZygpO1xuICAgIHRocmVhZC5zZXRTdGF0dXMoVGhyZWFkU3RhdHVzLkFTWU5DX1dBSVRJTkcpO1xuICAgIGZzLnV0aW1lcyhmaWxlcGF0aCwgYXRpbWUsIG10aW1lLCAoZXJyPzogTm9kZUpTLkVycm5vRXhjZXB0aW9uKSA9PiB7XG4gICAgICB0aHJlYWQuYXN5bmNSZXR1cm4oMSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdzZXRSZWFkT25seShMamF2YS9pby9GaWxlOylaJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fVW5peEZpbGVTeXN0ZW0sIGZpbGU6IEpWTVR5cGVzLmphdmFfaW9fRmlsZSk6IHZvaWQge1xuICAgIC8vIFdlJ2xsIGJlIHVuc2V0dGluZyB3cml0ZSBwZXJtaXNzaW9ucy5cbiAgICAvLyBMZWFkaW5nIDBvIGluZGljYXRlcyBvY3RhbC5cbiAgICB2YXIgZmlsZXBhdGggPSBmaWxlWydqYXZhL2lvL0ZpbGUvcGF0aCddLnRvU3RyaW5nKCksXG4gICAgICBtYXNrID0gfjB4OTI7XG4gICAgdGhyZWFkLnNldFN0YXR1cyhUaHJlYWRTdGF0dXMuQVNZTkNfV0FJVElORyk7XG4gICAgc3RhdEZpbGUoZmlsZXBhdGgsIChzdGF0cykgPT4ge1xuICAgICAgaWYgKHN0YXRzID09IG51bGwpIHtcbiAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnMuY2htb2QoZmlsZXBhdGgsIHN0YXRzLm1vZGUgJiBtYXNrLCAoZXJyPzogTm9kZUpTLkVycm5vRXhjZXB0aW9uKSA9PiB7XG4gICAgICAgICAgdGhyZWFkLmFzeW5jUmV0dXJuKGVyciAhPSBudWxsID8gMCA6IDEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgJ2dldFNwYWNlKExqYXZhL2lvL0ZpbGU7SSlKJyh0aHJlYWQ6IEpWTVRocmVhZCwgamF2YVRoaXM6IEpWTVR5cGVzLmphdmFfaW9fVW5peEZpbGVTeXN0ZW0sIGZpbGU6IEpWTVR5cGVzLmphdmFfaW9fRmlsZSwgYXJnMTogbnVtYmVyKTogTG9uZyB7XG4gICAgdGhyZWFkLnRocm93TmV3RXhjZXB0aW9uKCdMamF2YS9sYW5nL1Vuc2F0aXNmaWVkTGlua0Vycm9yOycsICdOYXRpdmUgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICAvLyBTYXRpc2Z5IFR5cGVTY3JpcHQgcmV0dXJuIHR5cGUuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljICdpbml0SURzKClWJyh0aHJlYWQ6IEpWTVRocmVhZCk6IHZvaWQge1xuICAgIHRocmVhZC50aHJvd05ld0V4Y2VwdGlvbignTGphdmEvbGFuZy9VbnNhdGlzZmllZExpbmtFcnJvcjsnLCAnTmF0aXZlIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxufVxuXG5yZWdpc3Rlck5hdGl2ZXMoe1xuICAnamF2YS9pby9Db25zb2xlJzogamF2YV9pb19Db25zb2xlLFxuICAnamF2YS9pby9GaWxlRGVzY3JpcHRvcic6IGphdmFfaW9fRmlsZURlc2NyaXB0b3IsXG4gICdqYXZhL2lvL0ZpbGVJbnB1dFN0cmVhbSc6IGphdmFfaW9fRmlsZUlucHV0U3RyZWFtLFxuICAnamF2YS9pby9GaWxlT3V0cHV0U3RyZWFtJzogamF2YV9pb19GaWxlT3V0cHV0U3RyZWFtLFxuICAnamF2YS9pby9PYmplY3RJbnB1dFN0cmVhbSc6IGphdmFfaW9fT2JqZWN0SW5wdXRTdHJlYW0sXG4gICdqYXZhL2lvL09iamVjdE91dHB1dFN0cmVhbSc6IGphdmFfaW9fT2JqZWN0T3V0cHV0U3RyZWFtLFxuICAnamF2YS9pby9PYmplY3RTdHJlYW1DbGFzcyc6IGphdmFfaW9fT2JqZWN0U3RyZWFtQ2xhc3MsXG4gICdqYXZhL2lvL1JhbmRvbUFjY2Vzc0ZpbGUnOiBqYXZhX2lvX1JhbmRvbUFjY2Vzc0ZpbGUsXG4gICdqYXZhL2lvL1VuaXhGaWxlU3lzdGVtJzogamF2YV9pb19Vbml4RmlsZVN5c3RlbVxufSk7XG4iXX0=
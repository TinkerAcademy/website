{"version":3,"sources":["../../../../../../../../tmp/doppio-temp27519/tmp_release/src/natives/java_security.js"],"names":["doPrivileged","thread","action","ctx","setStatus","ThreadStatus","ASYNC_WAITING","e","rv","eCls","getClass","bsCl","getBsCl","errCls","getInitializedClass","reCls","isCastable","throwException","paeCons","eobj","asyncReturn","Doppio","require","VM","Enums","java_security_AccessController","throwNewException","registerNatives","java/security/AccessController"],"mappings":"AAEA,QAASA,cAAaC,EAAQC,EAAQC,GAClCF,EAAOG,UAAUC,aAAaC,eAC9BJ,EAAO,2BAA2BD,EAAQ,KAAM,SAAUM,EAAGC,GACzD,GAAID,EAAG,CACH,GAAIE,GAAOF,EAAEG,WACTC,EAAOV,EAAOW,UACdC,EAASF,EAAKG,oBAAoBb,EAAQ,qBAC1Cc,EAAQJ,EAAKG,oBAAoBb,EAAQ,+BAC9B,QAAXY,GAAmBJ,EAAKO,WAAWH,IAAqB,OAAVE,GAAkBN,EAAKO,WAAWD,GAChFd,EAAOgB,eAAeV,GAEtBN,EAAAA,UAAc,4CAA6C,SAAUiB,GACjE,GAAIC,GAAO,GAAID,GAAQjB,EACvBA,GAAOG,UAAUC,aAAaC,eAC9Ba,EAAK,kCAAkClB,GAASM,GAAI,SAAUA,GACtDA,EACAN,EAAOgB,eAAeV,GAEtBN,EAAOgB,eAAeE,OAG/B,OAGPlB,GAAOmB,YAAYZ,KA1B/B,GAAIa,QAASC,QAAQ,gBACjBjB,aAAegB,OAAOE,GAAGC,MAAMnB,aA6B/BoB,+BAAiC,WACjC,QAASA,MAaT,MAXAA,GAA+B,sEAAwE,SAAUxB,GAC7G,MAAO,OAEXwB,EAA+B,0EAA4E,SAAUxB,GAEjH,MADAA,GAAOyB,kBAAkB,mCAAoC,kCACtD,MAEXD,EAA+B,oEAAsEzB,aACrGyB,EAA+B,wGAA0GzB,aACzIyB,EAA+B,6EAA+EzB,aAC9GyB,EAA+B,iHAAmHzB,aAC3IyB,IAEXE,kBAAkBC,iCAAkCH","file":"java_security.js","sourcesContent":["var Doppio = require('../doppiojvm');\nvar ThreadStatus = Doppio.VM.Enums.ThreadStatus;\nfunction doPrivileged(thread, action, ctx) {\n    thread.setStatus(ThreadStatus.ASYNC_WAITING);\n    action['run()Ljava/lang/Object;'](thread, null, function (e, rv) {\n        if (e) {\n            var eCls = e.getClass();\n            var bsCl = thread.getBsCl();\n            var errCls = bsCl.getInitializedClass(thread, 'Ljava/lang/Error;');\n            var reCls = bsCl.getInitializedClass(thread, 'Ljava/lang/RuntimeException;');\n            if (errCls !== null && eCls.isCastable(errCls) || reCls !== null && eCls.isCastable(reCls)) {\n                thread.throwException(e);\n            } else {\n                thread.import('Ljava/security/PrivilegedActionException;', function (paeCons) {\n                    var eobj = new paeCons(thread);\n                    thread.setStatus(ThreadStatus.ASYNC_WAITING);\n                    eobj['<init>(Ljava/lang/Exception;)V'](thread, [e], function (e) {\n                        if (e) {\n                            thread.throwException(e);\n                        } else {\n                            thread.throwException(eobj);\n                        }\n                    });\n                }, false);\n            }\n        } else {\n            thread.asyncReturn(rv);\n        }\n    });\n}\nvar java_security_AccessController = function () {\n    function java_security_AccessController() {\n    }\n    java_security_AccessController['getStackAccessControlContext()Ljava/security/AccessControlContext;'] = function (thread) {\n        return null;\n    };\n    java_security_AccessController['getInheritedAccessControlContext()Ljava/security/AccessControlContext;'] = function (thread) {\n        thread.throwNewException('Ljava/lang/UnsatisfiedLinkError;', 'Native method not implemented.');\n        return null;\n    };\n    java_security_AccessController['doPrivileged(Ljava/security/PrivilegedAction;)Ljava/lang/Object;'] = doPrivileged;\n    java_security_AccessController['doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;'] = doPrivileged;\n    java_security_AccessController['doPrivileged(Ljava/security/PrivilegedExceptionAction;)Ljava/lang/Object;'] = doPrivileged;\n    java_security_AccessController['doPrivileged(Ljava/security/PrivilegedExceptionAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;'] = doPrivileged;\n    return java_security_AccessController;\n}();\nregisterNatives({ 'java/security/AccessController': java_security_AccessController });\n//# sourceMappingURL=java_security.js.map"]}